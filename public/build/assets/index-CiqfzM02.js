import{r as m,j as s,c as ze,b as Ss,u as We,L as C,a as we,H as Rs}from"./app-U8YXLd1t.js";import{f as Ts,D as ks,a as Is,e as Ds,b as _s,c as Ps,d as Es}from"./dialog-4OB0kv9o.js";import{L as $e}from"./label-BPy6BQ9z.js";import{c as ls,e as Ve,u as Gs,d as Re,f as Fs}from"./index-Hv_yU9_w.js";import{u as He,B as f}from"./button-BIK6FZZj.js";import{h as is,I as As,R as Os,j as Ls,A as Ms}from"./app-layout-CdhcPiDn.js";import{a as $s,u as Bs,C as Vs}from"./index-DXf1X9xn.js";import{u as zs}from"./index-DCB7DMTV.js";import{c as Ke}from"./utils-D0Zg16Wk.js";import{c as Hs}from"./createLucideIcon-CBVvH8xR.js";import{B as Ce}from"./badge-CNS9zTCy.js";import{I as Ks}from"./input-DIDqrx5K.js";import{S as Ye,a as Je,c as k,b as Qe,d as Ze}from"./select-DSR3rMaI.js";import{C as Us,a as qs,b as Xs,c as Ws,d as Ys,e as Js}from"./command-B5voI2F0.js";import{b as Qs,P as Zs,a as et}from"./popover-CdvWkJCw.js";import{b as Be,e as R,a as st,c as T,T as tt,d as at}from"./table-Ck7gMMMO.js";import{t as b}from"./index-7ujUmCNw.js";import{CategoryFormDialog as rt}from"./category-BY7RjrGR.js";import{E as es}from"./eye-DsvCdlV8.js";import{P as ss}from"./pencil-BLnpbb7k.js";import{P as Se}from"./plus-BTSP3R2A.js";import{T as ts}from"./trash-2-BwOlG3LX.js";import{C as lt}from"./copy-B1Zrf0bV.js";import{S as as}from"./search-DaDCtYfG.js";import"./app-ClQ2typU.js";import"./x-DKlh0bgi.js";import"./index-B35DBIvM.js";import"./avatar-ChG8s8Pm.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./app-logo-icon-DyGRE7IG.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./users-Df-G5ChN.js";import"./file-text-NfpqAQTW.js";import"./index-Bo2RbnIz.js";import"./textarea-D7LKIosO.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nt=Hs("Circle",it);var Ue="Radio",[ot,ns]=ls(Ue),[ct,dt]=ot(Ue),os=m.forwardRef((e,a)=>{const{__scopeRadio:l,name:i,checked:r=!1,required:n,disabled:d,value:j="on",onCheck:o,form:x,...h}=e,[g,w]=m.useState(null),p=He(a,u=>w(u)),c=m.useRef(!1),S=g?x||!!g.closest("form"):!0;return s.jsxs(ct,{scope:l,checked:r,disabled:d,children:[s.jsx(Re.button,{type:"button",role:"radio","aria-checked":r,"data-state":hs(r),"data-disabled":d?"":void 0,disabled:d,value:j,...h,ref:p,onClick:Ve(e.onClick,u=>{r||o?.(),S&&(c.current=u.isPropagationStopped(),c.current||u.stopPropagation())})}),S&&s.jsx(ms,{control:g,bubbles:!c.current,name:i,value:j,checked:r,required:n,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});os.displayName=Ue;var cs="RadioIndicator",ds=m.forwardRef((e,a)=>{const{__scopeRadio:l,forceMount:i,...r}=e,n=dt(cs,l);return s.jsx(Fs,{present:i||n.checked,children:s.jsx(Re.span,{"data-state":hs(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:a})})});ds.displayName=cs;var mt="RadioBubbleInput",ms=m.forwardRef(({__scopeRadio:e,control:a,checked:l,bubbles:i=!0,...r},n)=>{const d=m.useRef(null),j=He(d,n),o=zs(l),x=Bs(a);return m.useEffect(()=>{const h=d.current;if(!h)return;const g=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(g,"checked").set;if(o!==l&&p){const c=new Event("click",{bubbles:i});p.call(h,l),h.dispatchEvent(c)}},[o,l,i]),s.jsx(Re.input,{type:"radio","aria-hidden":!0,defaultChecked:l,...r,tabIndex:-1,ref:j,style:{...r.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ms.displayName=mt;function hs(e){return e?"checked":"unchecked"}var ht=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Te="RadioGroup",[ut,ua]=ls(Te,[is,ns]),us=is(),xs=ns(),[xt,pt]=ut(Te),ps=m.forwardRef((e,a)=>{const{__scopeRadioGroup:l,name:i,defaultValue:r,value:n,required:d=!1,disabled:j=!1,orientation:o,dir:x,loop:h=!0,onValueChange:g,...w}=e,p=us(l),c=$s(x),[S,u]=Gs({prop:n,defaultProp:r??null,onChange:g,caller:Te});return s.jsx(xt,{scope:l,name:i,required:d,disabled:j,value:S,onValueChange:u,children:s.jsx(Os,{asChild:!0,...p,orientation:o,dir:c,loop:h,children:s.jsx(Re.div,{role:"radiogroup","aria-required":d,"aria-orientation":o,"data-disabled":j?"":void 0,dir:c,...w,ref:a})})})});ps.displayName=Te;var fs="RadioGroupItem",gs=m.forwardRef((e,a)=>{const{__scopeRadioGroup:l,disabled:i,...r}=e,n=pt(fs,l),d=n.disabled||i,j=us(l),o=xs(l),x=m.useRef(null),h=He(a,x),g=n.value===r.value,w=m.useRef(!1);return m.useEffect(()=>{const p=S=>{ht.includes(S.key)&&(w.current=!0)},c=()=>w.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",c)}},[]),s.jsx(As,{asChild:!0,...j,focusable:!d,active:g,children:s.jsx(os,{disabled:d,required:n.required,checked:g,...o,...r,name:n.name,ref:h,onCheck:()=>n.onValueChange(r.value),onKeyDown:Ve(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ve(r.onFocus,()=>{w.current&&x.current?.click()})})})});gs.displayName=fs;var ft="RadioGroupIndicator",js=m.forwardRef((e,a)=>{const{__scopeRadioGroup:l,...i}=e,r=xs(l);return s.jsx(ds,{...r,...i,ref:a})});js.displayName=ft;var gt=ps,jt=gs,bt=js;function vt(e){const a=ze.c(8);let l,i;a[0]!==e?({className:l,...i}=e,a[0]=e,a[1]=l,a[2]=i):(l=a[1],i=a[2]);let r;a[3]!==l?(r=Ke("grid gap-3",l),a[3]=l,a[4]=r):r=a[4];let n;return a[5]!==i||a[6]!==r?(n=s.jsx(gt,{"data-slot":"radio-group",className:r,...i}),a[5]=i,a[6]=r,a[7]=n):n=a[7],n}function rs(e){const a=ze.c(9);let l,i;a[0]!==e?({className:l,...i}=e,a[0]=e,a[1]=l,a[2]=i):(l=a[1],i=a[2]);let r;a[3]!==l?(r=Ke("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",l),a[3]=l,a[4]=r):r=a[4];let n;a[5]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(bt,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(nt,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})}),a[5]=n):n=a[5];let d;return a[6]!==i||a[7]!==r?(d=s.jsx(jt,{"data-slot":"radio-group-item",className:r,...i,children:n}),a[6]=i,a[7]=r,a[8]=d):d=a[8],d}const yt=[{title:"Danh sách Tour",href:b.index().url}];function xa(){const e=ze.c(106),{tours:a,templates:l,categories:i,allTours:r,filters:n}=Ss().props;let d;e[0]!==n?(d=n===void 0?{}:n,e[0]=n,e[1]=d):d=e[1];const j=d,o=l,x=o&&"data"in o&&"links"in o,h=x?o.data:l||a;console.log("All Tours for Cloning:",h);const[g,w]=m.useState(!1),[p]=m.useState(void 0),[c,S]=m.useState(j.search||""),[u,bs]=m.useState(j.category_id||"all"),[v,vs]=m.useState(j.status||"all"),[ke,Ie]=m.useState(!1),[Q,qe]=m.useState(!1),[y,ys]=m.useState("new"),[N,Ns]=m.useState(""),{post:De,processing:ws}=We();let Z;e[2]!==y||e[3]!==De||e[4]!==N?(Z=()=>{y==="clone"&&N?De(`/tours/${N}/clone`,{onSuccess:()=>Ie(!1)}):we.get(b.create().url)},e[2]=y,e[3]=De,e[4]=N,e[5]=Z):Z=e[5];const _e=Z,{delete:Pe}=We();let ee;e[6]!==Pe?(ee=(t,Me)=>{confirm(`Bạn có chắc muốn xóa tour "${Me}" (ID: ${t})?`)&&Pe(b.destroy(t).url)},e[6]=Pe,e[7]=ee):ee=e[7];const I=ee;let se;e[8]!==u||e[9]!==c||e[10]!==v?(se=t=>{t.preventDefault(),we.get(b.index().url,{search:c||void 0,category_id:u!=="all"?u:void 0,status:v!=="all"?v:void 0},{preserveState:!0,preserveScroll:!0})},e[8]=u,e[9]=c,e[10]=v,e[11]=se):se=e[11];const Ee=se;let te;e[12]!==c||e[13]!==v?(te=t=>{bs(t),we.get(b.index().url,{search:c||void 0,category_id:t!=="all"?t:void 0,status:v!=="all"?v:void 0},{preserveState:!0,preserveScroll:!0})},e[12]=c,e[13]=v,e[14]=te):te=e[14];const Ge=te;let ae;e[15]!==u||e[16]!==c?(ae=t=>{vs(t),we.get(b.index().url,{search:c||void 0,category_id:u!=="all"?u:void 0,status:t!=="all"?t:void 0},{preserveState:!0,preserveScroll:!0})},e[15]=u,e[16]=c,e[17]=ae):ae=e[17];const Fe=ae,Xe=St;let re;e[18]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(Rs,{title:"Danh sách Tour"}),e[18]=re):re=e[18];let le;e[19]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Danh sách Tour"}),e[19]=le):le=e[19];let ie;e[20]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(Ts,{asChild:!0,children:s.jsxs(f,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(Se,{className:"mr-2 h-4 w-4"})," Tạo Tour mới"]})}),e[20]=ie):ie=e[20];let ne;e[21]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsxs(ks,{children:[s.jsx(Is,{children:"Tạo Tour Mới"}),s.jsx(Ds,{children:"Bạn muốn tạo tour mới hoàn toàn hay sao chép từ tour có sẵn?"})]}),e[21]=ne):ne=e[21];let oe;e[22]===Symbol.for("react.memo_cache_sentinel")?(oe=t=>ys(t),e[22]=oe):oe=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(rs,{value:"new",id:"new",className:"peer sr-only"}),e[23]=ce):ce=e[23];let de,me;e[24]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsxs("div",{children:[ce,s.jsxs($e,{htmlFor:"new",className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[s.jsx(Se,{className:"mb-3 h-6 w-6"}),"Tạo mới hoàn toàn"]})]}),me=s.jsx(rs,{value:"clone",id:"clone",className:"peer sr-only"}),e[24]=de,e[25]=me):(de=e[24],me=e[25]);let he;e[26]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsxs("div",{children:[me,s.jsxs($e,{htmlFor:"clone",className:"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[s.jsx(lt,{className:"mb-3 h-6 w-6"})," Sao chép tour cũ"]})]}),e[26]=he):he=e[26];let D;e[27]!==y?(D=s.jsxs(vt,{value:y,onValueChange:oe,className:"grid grid-cols-2 gap-4",children:[de,he]}),e[27]=y,e[28]=D):D=e[28];let _;e[29]!==r||e[30]!==y||e[31]!==Q||e[32]!==N?(_=y==="clone"&&s.jsxs("div",{className:"space-y-2 flex flex-col",children:[s.jsx($e,{children:"Chọn Tour để sao chép"}),s.jsxs(Qs,{open:Q,onOpenChange:qe,children:[s.jsx(Zs,{asChild:!0,children:s.jsxs(f,{variant:"outline",role:"combobox","aria-expanded":Q,className:"w-full justify-between",children:[N?r.find(t=>String(t.id)===N)?.title:"-- Chọn tour --",s.jsx(Ls,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(et,{className:"w-[450px] p-0",children:s.jsxs(Us,{children:[s.jsx(qs,{placeholder:"Tìm kiếm tour..."}),s.jsxs(Xs,{children:[s.jsx(Ws,{children:"Không tìm thấy tour nào."}),s.jsx(Ys,{children:r.map(t=>s.jsxs(Js,{value:t.title,onSelect:()=>{Ns(String(t.id)===N?"":String(t.id)),qe(!1)},children:[s.jsx(Vs,{className:Ke("mr-2 h-4 w-4",N===String(t.id)?"opacity-100":"opacity-0")}),t.title]},t.id))})]})]})})]})]}),e[29]=r,e[30]=y,e[31]=Q,e[32]=N,e[33]=_):_=e[33];let P;e[34]!==D||e[35]!==_?(P=s.jsxs("div",{className:"grid gap-6 py-4",children:[D,_]}),e[34]=D,e[35]=_,e[36]=P):P=e[36];let ue;e[37]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(f,{variant:"outline",onClick:()=>Ie(!1),children:"Hủy"}),e[37]=ue):ue=e[37];const Ae=y==="clone"&&!N||ws,Oe=y==="new"?"Tiếp tục tạo mới":"Sao chép Tour";let E;e[38]!==_e||e[39]!==Ae||e[40]!==Oe?(E=s.jsxs(_s,{children:[ue,s.jsx(f,{onClick:_e,disabled:Ae,children:Oe})]}),e[38]=_e,e[39]=Ae,e[40]=Oe,e[41]=E):E=e[41];let G;e[42]!==P||e[43]!==E?(G=s.jsxs(Ps,{className:"sm:max-w-[500px]",children:[ne,P,E]}),e[42]=P,e[43]=E,e[44]=G):G=e[44];let F;e[45]!==ke||e[46]!==G?(F=s.jsxs("div",{className:"flex items-center justify-between",children:[le,s.jsxs(Es,{open:ke,onOpenChange:Ie,children:[ie,G]})]}),e[45]=ke,e[46]=G,e[47]=F):F=e[47];let xe;e[48]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(as,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e[48]=xe):xe=e[48];let pe;e[49]===Symbol.for("react.memo_cache_sentinel")?(pe=t=>S(t.target.value),e[49]=pe):pe=e[49];let A;e[50]!==c?(A=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[xe,s.jsx(Ks,{type:"text",placeholder:"Tìm kiếm theo tên tour...",value:c,onChange:pe,className:"pl-10 w-full"})]})}),e[50]=c,e[51]=A):A=e[51];let fe;e[52]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(Ye,{className:"w-full md:w-[200px]",children:s.jsx(Je,{placeholder:"Tất cả danh mục"})}),e[52]=fe):fe=e[52];let ge;e[53]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(k,{value:"all",children:"Tất cả danh mục"}),e[53]=ge):ge=e[53];let O;e[54]!==i?(O=i.map(Ct),e[54]=i,e[55]=O):O=e[55];let L;e[56]!==O?(L=s.jsxs(Qe,{children:[ge,O]}),e[56]=O,e[57]=L):L=e[57];let M;e[58]!==u||e[59]!==Ge||e[60]!==L?(M=s.jsxs(Ze,{value:u,onValueChange:Ge,children:[fe,L]}),e[58]=u,e[59]=Ge,e[60]=L,e[61]=M):M=e[61];let je;e[62]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(Ye,{className:"w-full md:w-[180px]",children:s.jsx(Je,{placeholder:"Tất cả trạng thái"})}),e[62]=je):je=e[62];let be;e[63]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsxs(Qe,{children:[s.jsx(k,{value:"all",children:"Tất cả trạng thái"}),s.jsx(k,{value:"0",children:"Đã hủy"}),s.jsx(k,{value:"1",children:"Sắp có"}),s.jsx(k,{value:"2",children:"Đang diễn ra"}),s.jsx(k,{value:"3",children:"Đã hoàn thành"})]}),e[63]=be):be=e[63];let $;e[64]!==Fe||e[65]!==v?($=s.jsxs(Ze,{value:v,onValueChange:Fe,children:[je,be]}),e[64]=Fe,e[65]=v,e[66]=$):$=e[66];let B;e[67]!==M||e[68]!==$?(B=s.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:flex md:gap-3",children:[M,$]}),e[67]=M,e[68]=$,e[69]=B):B=e[69];let ve;e[70]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsxs(f,{type:"submit",variant:"outline",className:"w-full md:w-auto",children:[s.jsx(as,{className:"mr-2 h-4 w-4"})," Tìm kiếm"]}),e[70]=ve):ve=e[70];let V;e[71]!==Ee||e[72]!==A||e[73]!==B?(V=s.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:s.jsxs("form",{onSubmit:Ee,className:"flex flex-col gap-3 md:flex-row md:items-center",children:[A,B,ve]})}),e[71]=Ee,e[72]=A,e[73]=B,e[74]=V):V=e[74];let ye;e[75]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(st,{children:s.jsxs(Be,{className:"bg-gray-50",children:[s.jsx(T,{className:"w-[60px] text-center",children:"STT"}),s.jsx(T,{children:"Tour"}),s.jsx(T,{children:"Danh mục"}),s.jsx(T,{children:"Thời gian"}),s.jsx(T,{children:"Giá"}),s.jsx(T,{children:"Trạng thái"}),s.jsx(T,{className:"w-[180px] text-center",children:"Hành động"})]})}),e[75]=ye):ye=e[75];let z;e[76]!==I||e[77]!==x||e[78]!==o||e[79]!==h?(z=h.length===0?s.jsx(Be,{children:s.jsx(R,{colSpan:7,className:"h-24 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Không tìm thấy tour nào."}),s.jsx(C,{href:b.create(),children:s.jsx(f,{variant:"link",className:"mt-2 text-blue-600",children:"Tạo tour mới"})})]})})}):h.map((t,Me)=>{const Cs=x&&o.from?o.from-1:0;return s.jsxs(Be,{children:[s.jsx(R,{className:"text-center text-gray-500",children:Cs+Me+1}),s.jsx(R,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:t.thumbnail?`${t.thumbnail}`:"https://placehold.co/48x48?text=No+Img",alt:t.title,className:"h-12 w-12 rounded border object-cover"}),s.jsx("div",{children:s.jsx("p",{className:"font-medium text-gray-900",children:t.title})})]})}),s.jsx(R,{children:s.jsx(Ce,{variant:"outline",children:t.category?.title||"Chưa phân loại"})}),s.jsxs(R,{className:"text-sm whitespace-nowrap",children:[t.day," ngày ",t.night," đêm",t.instances&&t.instances.length>0&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",t.instances.length," chuyến)"]})]}),s.jsx(R,{className:"text-sm font-medium whitespace-nowrap",children:t.instances&&t.instances.length>0?s.jsxs("div",{className:"space-y-1",children:[t.instances.slice(0,1).map(wt),t.instances.length>1&&s.jsxs("div",{className:"text-xs text-gray-500",children:["+",t.instances.length-1," chuyến khác"]})]}):s.jsx("span",{className:"text-gray-400",children:"Chưa có chuyến đi"})}),s.jsx(R,{children:t.instances&&t.instances.length>0?s.jsx("div",{className:"space-y-1",children:t.instances.slice(0,1).map(J=>s.jsx(Ce,{variant:"secondary",className:`text-xs whitespace-nowrap ${Xe(J.status)}`,children:J.status===0?"Đã hủy":J.status===1?"Sắp có":J.status===2?"Đang diễn ra":J.status===3?"Đã hoàn thành":"Không xác định"},J.id))}):s.jsx(Ce,{variant:"outline",className:"text-xs",children:"Chưa có chuyến"})}),s.jsx(R,{children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(C,{href:b.show(t.id).url,children:s.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:text-blue-600",title:"Xem chi tiết",children:s.jsx(es,{className:"h-4 w-4"})})}),s.jsx(C,{href:b.edit(t.id).url,children:s.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:text-amber-600",title:"Chỉnh sửa",children:s.jsx(ss,{className:"h-4 w-4"})})}),s.jsx(C,{href:`/tours/${t.id}/instances/create`,children:s.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:text-green-600",title:"Tạo chuyến đi",children:s.jsx(Se,{className:"h-4 w-4"})})}),s.jsx(f,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:text-red-600",onClick:()=>I(t.id,t.title),title:"Xóa",children:s.jsx(ts,{className:"h-4 w-4"})})]})})]},t.id)}),e[76]=I,e[77]=x,e[78]=o,e[79]=h,e[80]=z):z=e[80];let H;e[81]!==z?(H=s.jsx("div",{className:"hidden md:block",children:s.jsxs(tt,{children:[ye,s.jsx(at,{children:z})]})}),e[81]=z,e[82]=H):H=e[82];let K;e[83]!==I||e[84]!==h?(K=h.length===0?s.jsxs("div",{className:"text-center p-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed",children:[s.jsx("p",{children:"Không tìm thấy tour nào."}),s.jsx(C,{href:b.create(),children:s.jsx(f,{variant:"link",className:"mt-2 text-blue-600 font-medium",children:"+ Tạo tour mới"})})]}):h.map(t=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("img",{src:t.thumbnail||"https://placehold.co/80x80?text=No+Img",alt:t.title,className:"h-20 w-20 rounded-md object-cover border bg-gray-100 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 leading-tight",children:t.title}),s.jsxs("div",{className:"mt-1 flex flex-wrap gap-2 text-xs text-gray-600",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 border border-gray-200",children:t.category?.title||"Chưa phân loại"}),s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 border border-blue-100",children:[t.day,"N",t.night,"Đ"]})]})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-gray-100 pt-3",children:[s.jsx("div",{children:t.instances&&t.instances.length>0?s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-bold text-green-600",children:t.instances[0].price_adult?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(t.instances[0].price_adult)):"Chưa có giá"}),s.jsxs("div",{className:"mt-1",children:[s.jsx(Ce,{variant:"secondary",className:`${Xe(t.instances[0].status)} text-[10px] px-1.5 h-5`,children:t.instances[0].status===0?"Đã hủy":t.instances[0].status===1?"Sắp có":t.instances[0].status===2?"Đang diễn ra":t.instances[0].status===3?"Đã hoàn thành":"Unknown"}),t.instances.length>1&&s.jsxs("span",{className:"ml-1 text-[10px] text-gray-400",children:["+",t.instances.length-1," khác"]})]})]}):s.jsx("span",{className:"text-sm text-gray-400 italic",children:"Chưa có chuyến"})}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 border-t border-gray-100 pt-3",children:[s.jsx(C,{href:b.show(t.id).url,className:"w-full",children:s.jsxs(f,{variant:"outline",size:"sm",className:"w-full text-blue-600 bg-blue-50 border-blue-200 hover:bg-blue-100",children:[s.jsx(es,{className:"mr-1.5 h-3.5 w-3.5"})," Chi tiết"]})}),s.jsx(C,{href:b.edit(t.id).url,className:"w-full",children:s.jsxs(f,{variant:"outline",size:"sm",className:"w-full text-amber-600 bg-amber-50 border-amber-200 hover:bg-amber-100",children:[s.jsx(ss,{className:"mr-1.5 h-3.5 w-3.5"})," Chỉnh sửa"]})}),s.jsx(C,{href:`/tours/${t.id}/instances/create`,className:"w-full",children:s.jsxs(f,{variant:"outline",size:"sm",className:"w-full text-green-600 bg-green-50 border-green-200 hover:bg-green-100",children:[s.jsx(Se,{className:"mr-1.5 h-3.5 w-3.5"})," Lên lịch"]})}),s.jsxs(f,{variant:"outline",size:"sm",className:"w-full text-red-600 bg-red-50 border-red-200 hover:bg-red-100",onClick:()=>I(t.id,t.title),children:[s.jsx(ts,{className:"mr-1.5 h-3.5 w-3.5"})," Xóa tour"]})]})]})]},t.id)),e[83]=I,e[84]=h,e[85]=K):K=e[85];let U;e[86]!==K?(U=s.jsx("div",{className:"md:hidden space-y-4",children:K}),e[86]=K,e[87]=U):U=e[87];let q;e[88]!==x||e[89]!==o?(q=x&&o.links&&o.links.length>3&&s.jsxs("div",{className:"flex items-center justify-between border-t bg-gray-50 px-4 py-3",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Hiển thị ",o.from||0," đến"," ",o.to||0," trong tổng số"," ",o.total||0," tour"]}),s.jsx("div",{className:"flex gap-2",children:o.links.map(Nt)})]}),e[88]=x,e[89]=o,e[90]=q):q=e[90];let X;e[91]!==H||e[92]!==U||e[93]!==q?(X=s.jsxs("div",{className:"rounded-lg border bg-white shadow-sm",children:[H,U,q]}),e[91]=H,e[92]=U,e[93]=q,e[94]=X):X=e[94];let W;e[95]!==F||e[96]!==V||e[97]!==X?(W=s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[F,V,X]})}),e[95]=F,e[96]=V,e[97]=X,e[98]=W):W=e[98];const Le=p?"Chỉnh sửa Danh Mục":"Tạo Danh Mục Mới";let Y;e[99]!==p||e[100]!==g||e[101]!==Le?(Y=s.jsx(rt,{open:g,onOpenChange:w,initialData:p,title:Le}),e[99]=p,e[100]=g,e[101]=Le,e[102]=Y):Y=e[102];let Ne;return e[103]!==W||e[104]!==Y?(Ne=s.jsxs(Ms,{breadcrumbs:yt,children:[re,W,Y]}),e[103]=W,e[104]=Y,e[105]=Ne):Ne=e[105],Ne}function Nt(e,a){return s.jsx(C,{href:e.url||"#",className:`rounded-md px-3 py-2 text-sm font-medium ${e.active?"bg-blue-600 text-white":e.url?"border bg-white text-gray-700 hover:bg-gray-50":"cursor-not-allowed bg-gray-100 text-gray-400"}`,dangerouslySetInnerHTML:{__html:e.label}},a)}function wt(e){return s.jsx("div",{className:"text-green-600",children:e.price_adult?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.price_adult):"Chưa có giá"},e.id)}function Ct(e){return s.jsx(k,{value:String(e.id),children:e.title},e.id)}function St(e){switch(e){case 0:return"bg-red-100 text-red-800";case 1:return"bg-yellow-100 text-yellow-800";case 2:return"bg-blue-100 text-blue-800";case 3:return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}export{xa as default};
