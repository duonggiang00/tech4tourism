import{c as W,u as X,r as Y,j as t}from"./app-U8YXLd1t.js";import{B as M}from"./button-BIK6FZZj.js";import{D as Z,a as ee,b as te,c as se,d as le}from"./dialog-4OB0kv9o.js";import{L as Q}from"./label-BPy6BQ9z.js";import{T as U}from"./textarea-D7LKIosO.js";import{p as V}from"./index-CGelz8kl.js";import{t as B}from"./index-Bo2RbnIz.js";import"./app-ClQ2typU.js";import"./utils-D0Zg16Wk.js";import"./index-Hv_yU9_w.js";import"./index-B35DBIvM.js";import"./x-DKlh0bgi.js";import"./createLucideIcon-CBVvH8xR.js";import"./index-CMWG4mbA.js";function Ne(_){const e=W.c(68),{open:n,onOpenChange:i,policy:s}=_;let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w={title:"",content:""},e[0]=w):w=e[0];const{data:r,setData:c,post:I,put:A,processing:a,errors:o,reset:h,clearErrors:O}=X(w);let E;e[1]!==O||e[2]!==n||e[3]!==s||e[4]!==h||e[5]!==c?(E=()=>{n&&(O(),s?c({title:s.title,content:s.content}):h())},e[1]=O,e[2]=n,e[3]=s,e[4]=h,e[5]=c,e[6]=E):E=e[6];let T;e[7]!==n||e[8]!==s?(T=[n,s],e[7]=n,e[8]=s,e[9]=T):T=e[9],Y.useEffect(E,T);let F;e[10]!==r||e[11]!==i||e[12]!==s||e[13]!==I||e[14]!==A||e[15]!==h?(F=l=>{l.preventDefault(),console.log(r),s?A(V.update(s.id).url,{onSuccess:()=>{B.success("Cập nhật chính sách thành công"),i(!1),h()},onError:ne}):I(V.store().url,{onSuccess:()=>{B.success("Thêm chính sách mới thành công"),i(!1),h()},onError:oe})},e[10]=r,e[11]=i,e[12]=s,e[13]=I,e[14]=A,e[15]=h,e[16]=F):F=e[16];const P=F,$=ie,q=s?"Chỉnh sửa Chính sách":"Thêm Chính sách mới";let m;e[17]!==q?(m=t.jsx(Z,{children:t.jsx(ee,{children:q})}),e[17]=q,e[18]=m):m=e[18];let k;e[19]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs(Q,{htmlFor:"title",children:["Tiêu đề ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[19]=k):k=e[19];let f;e[20]!==c?(f=l=>{c("title",l.target.value),$(l)},e[20]=c,e[21]=f):f=e[21];let z;e[22]===Symbol.for("react.memo_cache_sentinel")?(z=l=>$(l),e[22]=z):z=e[22];const G=`min-h-[40px] w-full resize-none overflow-hidden ${o.title?"border-red-500":""}`;let p;e[23]!==r.title||e[24]!==G||e[25]!==f?(p=t.jsx(U,{id:"title",rows:1,value:r.title,onChange:f,onInput:z,placeholder:"Nhập tiêu đề chính sách...",className:G}),e[23]=r.title,e[24]=G,e[25]=f,e[26]=p):p=e[26];let d;e[27]!==o.title?(d=o.title&&t.jsx("p",{className:"text-sm text-red-500",children:o.title}),e[27]=o.title,e[28]=d):d=e[28];let u;e[29]!==p||e[30]!==d?(u=t.jsxs("div",{className:"space-y-2",children:[k,p,d]}),e[29]=p,e[30]=d,e[31]=u):u=e[31];let H;e[32]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsxs(Q,{htmlFor:"content",children:["Nội dung ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[32]=H):H=e[32];let x;e[33]!==c?(x=l=>{c("content",l.target.value),$(l)},e[33]=c,e[34]=x):x=e[34];let L;e[35]===Symbol.for("react.memo_cache_sentinel")?(L=l=>$(l),e[35]=L):L=e[35];const J=`w-full resize-none overflow-hidden ${o.content?"border-red-500":""}`;let g;e[36]!==r.content||e[37]!==x||e[38]!==J?(g=t.jsx(U,{id:"content",rows:5,value:r.content,onChange:x,onInput:L,placeholder:"Nhập nội dung chi tiết...",className:J}),e[36]=r.content,e[37]=x,e[38]=J,e[39]=g):g=e[39];let j;e[40]!==o.content?(j=o.content&&t.jsx("p",{className:"text-sm text-red-500",children:o.content}),e[40]=o.content,e[41]=j):j=e[41];let y;e[42]!==g||e[43]!==j?(y=t.jsxs("div",{className:"space-y-2",children:[H,g,j]}),e[42]=g,e[43]=j,e[44]=y):y=e[44];let b;e[45]!==i?(b=()=>i(!1),e[45]=i,e[46]=b):b=e[46];let N;e[47]!==a||e[48]!==b?(N=t.jsx(M,{type:"button",variant:"outline",onClick:b,disabled:a,children:"Hủy bỏ"}),e[47]=a,e[48]=b,e[49]=N):N=e[49];const K=a?"Đang lưu...":s?"Cập nhật":"Lưu lại";let v;e[50]!==a||e[51]!==K?(v=t.jsx(M,{type:"submit",disabled:a,children:K}),e[50]=a,e[51]=K,e[52]=v):v=e[52];let C;e[53]!==N||e[54]!==v?(C=t.jsxs(te,{children:[N,v]}),e[53]=N,e[54]=v,e[55]=C):C=e[55];let D;e[56]!==P||e[57]!==u||e[58]!==y||e[59]!==C?(D=t.jsxs("form",{onSubmit:P,className:"space-y-4 py-4",children:[u,y,C]}),e[56]=P,e[57]=u,e[58]=y,e[59]=C,e[60]=D):D=e[60];let S;e[61]!==D||e[62]!==m?(S=t.jsxs(se,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[600px]",children:[m,D]}),e[61]=D,e[62]=m,e[63]=S):S=e[63];let R;return e[64]!==i||e[65]!==n||e[66]!==S?(R=t.jsx(le,{open:n,onOpenChange:i,children:S}),e[64]=i,e[65]=n,e[66]=S,e[67]=R):R=e[67],R}function ie(_){_.target.style.height="auto",_.target.style.height=`${_.target.scrollHeight}px`}function oe(){B.error("Có lỗi xảy ra khi thêm mới")}function ne(){B.error("Có lỗi xảy ra khi cập nhật")}export{Ne as PolicyFormDialog};
