import{c as _e,u as Se,r as Ce,j as s}from"./app-Bzh0QcV-.js";import{B as be}from"./button-DLyenbHO.js";import{D as we,a as De,b as Te,c as Ee,d as Ge}from"./dialog-60B12crD.js";import{I as A}from"./input-BI3Hn33c.js";import{T as Ne}from"./textarea-BOc5ahgU.js";import{p as ye}from"./index-DaohGxKX.js";import"./app-AjfTabGW.js";import"./utils-D0Zg16Wk.js";import"./index-Cs37kpNU.js";import"./index-DXbMLhRD.js";import"./x-Cc7sq3My.js";import"./createLucideIcon-Qg7y1Ni9.js";import"./index-CMWG4mbA.js";function $e(K){const e=_e.c(119),{open:m,onOpenChange:n,initialData:a,title:me,serviceTypes:de}=K;let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=[],e[0]=O):O=e[0];let P;e[1]===Symbol.for("react.memo_cache_sentinel")?(P={name:"",description:"",email:"",hotline:"",address:"",website:"",status:"1",notes:"",services:O},e[1]=P):P=e[1];const{data:t,setData:l,post:he,put:fe,processing:pe,errors:c,reset:d}=Se(P);let W;e[2]!==a||e[3]!==d||e[4]!==l?(W=()=>{a?l({name:a.name||"",description:a.description||"",email:a.email||"",hotline:a.hotline||"",address:a.address||"",website:a.website||"",status:a.status||"1",notes:a.notes||"",services:[]}):d()},e[2]=a,e[3]=d,e[4]=l,e[5]=W):W=e[5];let $;e[6]!==a||e[7]!==m?($=[a,m],e[6]=a,e[7]=m,e[8]=$):$=e[8],Ce.useEffect(W,$);let J;e[9]!==t.services||e[10]!==l?(J=()=>{l("services",[...t.services,{name:"",service_type_id:"",price:""}])},e[9]=t.services,e[10]=l,e[11]=J):J=e[11];const ve=J;let M;e[12]!==t.services||e[13]!==l?(M=i=>{const r=[...t.services];r.splice(i,1),l("services",r)},e[12]=t.services,e[13]=l,e[14]=M):M=e[14];const xe=M;let Q;e[15]!==t.services||e[16]!==l?(Q=(i,r,o)=>{const ge=[...t.services];ge[i]={...ge[i],[r]:o},l("services",ge)},e[15]=t.services,e[16]=l,e[17]=Q):Q=e[17];const L=Q;let U;e[18]!==a||e[19]!==n||e[20]!==he||e[21]!==fe||e[22]!==d?(U=i=>{i.preventDefault(),a?.id?fe(ye.update(a.id).url,{onSuccess:()=>n(!1)}):he(ye.store().url,{onSuccess:()=>{n(!1),d()}})},e[18]=a,e[19]=n,e[20]=he,e[21]=fe,e[22]=d,e[23]=U):U=e[23];const ue=U;let h;e[24]!==me?(h=s.jsx(we,{children:s.jsx(De,{children:me})}),e[24]=me,e[25]=h):h=e[25];let V;e[26]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("h3",{className:"font-semibold text-lg",children:"Thông tin chung"}),e[26]=V):V=e[26];let X;e[27]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs("label",{className:"text-sm font-medium",children:["Tên Nhà Cung Cấp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),e[27]=X):X=e[27];let f;e[28]!==l?(f=i=>l("name",i.target.value),e[28]=l,e[29]=f):f=e[29];let p;e[30]!==t.name||e[31]!==f?(p=s.jsx(A,{value:t.name,onChange:f,placeholder:"Nhập tên nhà cung cấp"}),e[30]=t.name,e[31]=f,e[32]=p):p=e[32];let v;e[33]!==c.name?(v=c.name&&s.jsx("p",{className:"text-sm text-red-500",children:c.name}),e[33]=c.name,e[34]=v):v=e[34];let x;e[35]!==p||e[36]!==v?(x=s.jsxs("div",{children:[X,p,v]}),e[35]=p,e[36]=v,e[37]=x):x=e[37];let Y;e[38]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("label",{className:"text-sm font-medium",children:"Email"}),e[38]=Y):Y=e[38];let u;e[39]!==l?(u=i=>l("email",i.target.value),e[39]=l,e[40]=u):u=e[40];let j;e[41]!==t.email||e[42]!==u?(j=s.jsxs("div",{children:[Y,s.jsx(A,{type:"email",value:t.email,onChange:u,placeholder:"example@email.com"})]}),e[41]=t.email,e[42]=u,e[43]=j):j=e[43];let Z;e[44]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("label",{className:"text-sm font-medium",children:"Hotline"}),e[44]=Z):Z=e[44];let g;e[45]!==l?(g=i=>l("hotline",i.target.value),e[45]=l,e[46]=g):g=e[46];let b;e[47]!==t.hotline||e[48]!==g?(b=s.jsxs("div",{children:[Z,s.jsx(A,{value:t.hotline,onChange:g,placeholder:"Số điện thoại"})]}),e[47]=t.hotline,e[48]=g,e[49]=b):b=e[49];let ee;e[50]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx("label",{className:"text-sm font-medium",children:"Website"}),e[50]=ee):ee=e[50];let N;e[51]!==l?(N=i=>l("website",i.target.value),e[51]=l,e[52]=N):N=e[52];let y;e[53]!==t.website||e[54]!==N?(y=s.jsxs("div",{children:[ee,s.jsx(A,{value:t.website,onChange:N,placeholder:"https://..."})]}),e[53]=t.website,e[54]=N,e[55]=y):y=e[55];let se;e[56]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("label",{className:"text-sm font-medium",children:"Trạng thái"}),e[56]=se):se=e[56];let _;e[57]!==l?(_=i=>l("status",i.target.value),e[57]=l,e[58]=_):_=e[58];let te,le,ie;e[59]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("option",{value:"0",children:"Không hoạt động"}),le=s.jsx("option",{value:"1",children:"Hoạt động"}),ie=s.jsx("option",{value:"2",children:"Tạm ngưng"}),e[59]=te,e[60]=le,e[61]=ie):(te=e[59],le=e[60],ie=e[61]);let S;e[62]!==t.status||e[63]!==_?(S=s.jsxs("div",{children:[se,s.jsxs("select",{value:t.status,onChange:_,className:"w-full rounded-md border border-gray-300 p-2",children:[te,le,ie]})]}),e[62]=t.status,e[63]=_,e[64]=S):S=e[64];let C;e[65]!==x||e[66]!==j||e[67]!==b||e[68]!==y||e[69]!==S?(C=s.jsxs("div",{className:"space-y-4",children:[V,x,j,b,y,S]}),e[65]=x,e[66]=j,e[67]=b,e[68]=y,e[69]=S,e[70]=C):C=e[70];let ae,re;e[71]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx("h3",{className:"font-semibold text-lg",children:"Địa chỉ & Ghi chú"}),re=s.jsx("label",{className:"text-sm font-medium",children:"Địa chỉ"}),e[71]=ae,e[72]=re):(ae=e[71],re=e[72]);let w;e[73]!==l?(w=i=>l("address",i.target.value),e[73]=l,e[74]=w):w=e[74];let D;e[75]!==t.address||e[76]!==w?(D=s.jsxs("div",{children:[re,s.jsx(Ne,{value:t.address,onChange:w,placeholder:"Nhập địa chỉ",className:"h-24"})]}),e[75]=t.address,e[76]=w,e[77]=D):D=e[77];let ce;e[78]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx("label",{className:"text-sm font-medium",children:"Ghi chú"}),e[78]=ce):ce=e[78];let T;e[79]!==l?(T=i=>l("notes",i.target.value),e[79]=l,e[80]=T):T=e[80];let E;e[81]!==t.notes||e[82]!==T?(E=s.jsxs("div",{children:[ce,s.jsx(Ne,{value:t.notes,onChange:T,placeholder:"Ghi chú thêm (nếu có)",className:"h-24"})]}),e[81]=t.notes,e[82]=T,e[83]=E):E=e[83];let G;e[84]!==D||e[85]!==E?(G=s.jsxs("div",{className:"space-y-4",children:[ae,D,E]}),e[84]=D,e[85]=E,e[86]=G):G=e[86];let F;e[87]!==C||e[88]!==G?(F=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C,G]}),e[87]=C,e[88]=G,e[89]=F):F=e[89];let ne;e[90]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("h3",{className:"font-semibold text-lg",children:"Dịch vụ cung cấp"}),e[90]=ne):ne=e[90];let H;e[91]!==ve?(H=s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne,s.jsx(be,{type:"button",variant:"outline",size:"sm",onClick:ve,children:"+ Thêm dịch vụ"})]}),e[91]=ve,e[92]=H):H=e[92];let R;e[93]!==t.services||e[94]!==xe||e[95]!==L||e[96]!==de?(R=t.services.length===0?s.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4 bg-gray-50 rounded",children:"Chưa có dịch vụ nào được thêm."}):s.jsx("div",{className:"space-y-3",children:t.services.map((i,r)=>s.jsxs("div",{className:"flex gap-2 items-start p-3 border rounded bg-gray-50",children:[s.jsx("div",{className:"w-1/3 space-y-1",children:s.jsxs("select",{value:i.service_type_id,onChange:o=>L(r,"service_type_id",o.target.value),className:"w-full rounded-md border border-gray-300 p-2 text-sm",required:!0,children:[s.jsx("option",{value:"",children:"-- Loại dịch vụ --"}),de.map(Fe)]})}),s.jsx("div",{className:"w-1/3 space-y-1",children:s.jsx(A,{value:i.name,onChange:o=>L(r,"name",o.target.value),placeholder:"Tên dịch vụ",className:"h-9",required:!0})}),s.jsx("div",{className:"w-1/4 space-y-1",children:s.jsx(A,{type:"number",value:i.price,onChange:o=>L(r,"price",o.target.value),placeholder:"Giá",className:"h-9"})}),s.jsx(be,{type:"button",variant:"ghost",size:"icon",onClick:()=>xe(r),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:s.jsx("span",{className:"text-xl",children:"×"})})]},r))}),e[93]=t.services,e[94]=xe,e[95]=L,e[96]=de,e[97]=R):R=e[97];let k;e[98]!==c.services?(k=c.services&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:c.services}),e[98]=c.services,e[99]=k):k=e[99];let q;e[100]!==H||e[101]!==R||e[102]!==k?(q=s.jsxs("div",{className:"border-t pt-4",children:[H,R,k]}),e[100]=H,e[101]=R,e[102]=k,e[103]=q):q=e[103];const je=a?"Cập nhật":"Tạo mới";let z;e[104]!==pe||e[105]!==je?(z=s.jsx(Te,{children:s.jsx(be,{type:"submit",disabled:pe,children:je})}),e[104]=pe,e[105]=je,e[106]=z):z=e[106];let B;e[107]!==ue||e[108]!==F||e[109]!==q||e[110]!==z?(B=s.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[F,q,z]}),e[107]=ue,e[108]=F,e[109]=q,e[110]=z,e[111]=B):B=e[111];let I;e[112]!==B||e[113]!==h?(I=s.jsxs(Ee,{className:"max-w-[800px] max-h-[90vh] overflow-y-auto",children:[h,B]}),e[112]=B,e[113]=h,e[114]=I):I=e[114];let oe;return e[115]!==n||e[116]!==m||e[117]!==I?(oe=s.jsx(Ge,{open:m,onOpenChange:n,children:I}),e[115]=n,e[116]=m,e[117]=I,e[118]=oe):oe=e[118],oe}function Fe(K){return s.jsx("option",{value:K.id,children:K.name},K.id)}export{$e as ProviderFormDialog};
