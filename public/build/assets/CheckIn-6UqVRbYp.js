import{c as Ke,r as V,j as t,a as Me,H as Ue,L as ze}from"./app-CaSGj1uT.js";import{g as We,C as Xe,a as Ye,d as Je,e as Qe,A as Ze}from"./app-layout-Cy2scFGy.js";import{b as $,c as G,C as et,e as tt,a as st}from"./card-B5yYBXn0.js";import{B as _e}from"./button-BZEXzofL.js";import{B as K}from"./badge-fjcL5lAh.js";import{I as lt}from"./input-DS6fKu5u.js";import{C as it}from"./checkbox-Dw6fm8Su.js";import{T as nt,a as rt,b as Re,c as m,d as at,e as d}from"./table-CmhPySl3.js";import{F as De}from"./file-text-xLwrV0oL.js";import{C as ct}from"./index-5xdvLrBf.js";import{C as Be}from"./circle-check-D6S4rrRZ.js";import{C as Ae}from"./circle-x-B9zG9rAW.js";import{A as ot}from"./arrow-left-DWM__Iss.js";import{M as mt}from"./map-pin-ASbtl6oT.js";import{C as dt}from"./clock-BZi_k4Xa.js";import{S as ht}from"./save-DATlS4cM.js";import{U as xt}from"./users-BVM233CZ.js";import"./app-C1CjLIM7.js";import"./utils-D0Zg16Wk.js";import"./index-P0NC3ElT.js";import"./index-Dc8D3YAC.js";import"./x-BJwh83_V.js";import"./createLucideIcon-B2IF2C91.js";import"./index-B35KFXzL.js";import"./avatar-y1YlfNVC.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-2KxTv0kJ.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./index-D9FVAaNM.js";const ft={0:"Ng∆∞·ªùi l·ªõn",1:"Tr·∫ª em",2:"Em b√©"};function ss(c){const e=Ke.c(112),{checkIn:n,passengers:l,checkedIn:M}=c;let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U={},e[0]=U):U=e[0];const[r,F]=V.useState(U),[z,Le]=V.useState(!1);let W;e[1]===Symbol.for("react.memo_cache_sentinel")?(W=new Set,e[1]=W):W=e[1];const[ye,He]=V.useState(W);let h;e[2]!==l?(h={},l.forEach(s=>{const i=s.booking?.code||"Kh√¥ng c√≥ booking";h[i]||(h[i]=[]),h[i].push(s)}),e[2]=l,e[3]=h):h=e[3];const x=h;let X;e[4]!==l?(X=l.filter(Nt),e[4]=l,e[5]=X):X=e[5];const Y=X.length;let J;e[6]!==l?(J=l.filter(gt),e[6]=l,e[7]=J):J=e[7];const ke=J;let Q,Z;e[8]!==x?(Q=()=>{const s=Object.keys(x);He(new Set(s))},Z=[x],e[8]=x,e[9]=Q,e[10]=Z):(Q=e[9],Z=e[10]),V.useEffect(Q,Z);let ee;e[11]===Symbol.for("react.memo_cache_sentinel")?(ee=s=>{He(i=>{const o=new Set(i);return o.has(s)?o.delete(s):o.add(s),o})},e[11]=ee):ee=e[11];const Oe=ee;let te,se;e[12]!==M||e[13]!==l?(te=()=>{const s={};l.forEach(i=>{const o=M[i.id];s[i.id]={is_present:o?.is_present??!1,notes:o?.notes??""}}),F(s)},se=[l,M],e[12]=M,e[13]=l,e[14]=te,e[15]=se):(te=e[14],se=e[15]),V.useEffect(te,se);let le;e[16]===Symbol.for("react.memo_cache_sentinel")?(le=s=>{F(i=>({...i,[s]:{...i[s],is_present:!i[s]?.is_present}}))},e[16]=le):le=e[16];const Ie=le;let ie;e[17]===Symbol.for("react.memo_cache_sentinel")?(ie=(s,i)=>{F(o=>({...o,[s]:{...o[s],notes:i}}))},e[17]=ie):ie=e[17];const Pe=ie;let ne;e[18]!==r||e[19]!==n.id?(ne=()=>{Le(!0);const s=Object.entries(r).map(jt);Me.post(`/guide/checkin/${n.id}/save`,{passengers:s},{onFinish:()=>Le(!1)})},e[18]=r,e[19]=n.id,e[20]=ne):ne=e[20];const we=ne;let re;e[21]!==r?(re=Object.values(r).filter(pt),e[21]=r,e[22]=re):re=e[22];const ae=re.length,Se=l.length-ae,Te=`Check-in - ${n.title}`;let f;e[23]!==Te?(f=t.jsx(Ue,{title:Te}),e[23]=Te,e[24]=f):f=e[24];let u;e[25]!==n.trip_assignment.id?(u=We.trip.detail(n.trip_assignment.id),e[25]=n.trip_assignment.id,e[26]=u):u=e[26];let ce;e[27]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(_e,{variant:"ghost",size:"icon",children:t.jsx(ot,{className:"h-5 w-5"})}),e[27]=ce):ce=e[27];let p;e[28]!==u?(p=t.jsx(ze,{href:u,children:ce}),e[28]=u,e[29]=p):p=e[29];let oe;e[30]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(mt,{className:"h-6 w-6 text-primary"}),e[30]=oe):oe=e[30];let j;e[31]!==n.title?(j=t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[oe,n.title]}),e[31]=n.title,e[32]=j):j=e[32];let me;e[33]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(dt,{className:"h-4 w-4"}),e[33]=me):me=e[33];let g;e[34]!==n.checkin_time?(g=new Date(n.checkin_time).toLocaleString("vi-VN"),e[34]=n.checkin_time,e[35]=g):g=e[35];let de;e[36]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("span",{className:"mx-2",children:"‚Ä¢"}),e[36]=de):de=e[36];let N;e[37]!==n.trip_assignment.tour.title||e[38]!==g?(N=t.jsxs("p",{className:"text-muted-foreground flex items-center gap-2",children:[me,g,de,n.trip_assignment.tour.title]}),e[37]=n.trip_assignment.tour.title,e[38]=g,e[39]=N):N=e[39];let b;e[40]!==j||e[41]!==N?(b=t.jsxs("div",{className:"flex-1",children:[j,N]}),e[40]=j,e[41]=N,e[42]=b):b=e[42];let he;e[43]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ht,{className:"h-4 w-4"}),e[43]=he):he=e[43];const Ee=z?"ƒêang l∆∞u...":"L∆∞u ƒëi·ªÉm danh";let C;e[44]!==we||e[45]!==z||e[46]!==Ee?(C=t.jsxs(_e,{onClick:we,disabled:z,className:"gap-2",children:[he,Ee]}),e[44]=we,e[45]=z,e[46]=Ee,e[47]=C):C=e[47];let v;e[48]!==p||e[49]!==b||e[50]!==C?(v=t.jsxs("div",{className:"flex items-center gap-4",children:[p,b,C]}),e[48]=p,e[49]=b,e[50]=C,e[51]=v):v=e[51];let xe;e[52]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:t.jsx(xt,{className:"h-5 w-5 text-blue-600"})}),e[52]=xe):xe=e[52];let _;e[53]!==l.length?(_=t.jsx("p",{className:"text-2xl font-bold",children:l.length}),e[53]=l.length,e[54]=_):_=e[54];let fe;e[55]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"T·ªïng s·ªë"}),e[55]=fe):fe=e[55];let y;e[56]!==_?(y=t.jsx($,{children:t.jsxs(G,{className:"flex items-center gap-3 p-4",children:[xe,t.jsxs("div",{children:[_,fe]})]})}),e[56]=_,e[57]=y):y=e[57];let ue;e[58]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("div",{className:"p-2 rounded-full bg-green-100",children:t.jsx(Be,{className:"h-5 w-5 text-green-600"})}),e[58]=ue):ue=e[58];let k;e[59]!==ae?(k=t.jsx("p",{className:"text-2xl font-bold text-green-600",children:ae}),e[59]=ae,e[60]=k):k=e[60];let pe;e[61]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"C√≥ m·∫∑t"}),e[61]=pe):pe=e[61];let w;e[62]!==k?(w=t.jsx($,{children:t.jsxs(G,{className:"flex items-center gap-3 p-4",children:[ue,t.jsxs("div",{children:[k,pe]})]})}),e[62]=k,e[63]=w):w=e[63];let je;e[64]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("div",{className:"p-2 rounded-full bg-red-100",children:t.jsx(Ae,{className:"h-5 w-5 text-red-600"})}),e[64]=je):je=e[64];let S;e[65]!==Se?(S=t.jsx("p",{className:"text-2xl font-bold text-red-600",children:Se}),e[65]=Se,e[66]=S):S=e[66];let ge;e[67]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-sm text-muted-foreground",children:"V·∫Øng m·∫∑t"}),e[67]=ge):ge=e[67];let T;e[68]!==S?(T=t.jsx($,{children:t.jsxs(G,{className:"flex items-center gap-3 p-4",children:[je,t.jsxs("div",{children:[S,ge]})]})}),e[68]=S,e[69]=T):T=e[69];let E;e[70]!==y||e[71]!==w||e[72]!==T?(E=t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[y,w,T]}),e[70]=y,e[71]=w,e[72]=T,e[73]=E):E=e[73];let q;e[74]!==ke||e[75]!==Y?(q=Y>0&&t.jsx($,{className:"border-orange-200 bg-orange-50",children:t.jsxs(G,{className:"pt-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-100",children:t.jsx(De,{className:"h-5 w-5 text-orange-600"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-semibold text-orange-900",children:["C√≥ ",Y," kh√°ch h√†ng c√≥ y√™u c·∫ßu ƒë·∫∑c bi·ªát"]}),t.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Vui l√≤ng ki·ªÉm tra v√† ƒë·∫£m b·∫£o ƒë√°p ·ª©ng c√°c y√™u c·∫ßu n√†y trong su·ªët chuy·∫øn ƒëi"})]})]}),t.jsx("div",{className:"mt-4 space-y-2",children:ke.map(ut)})]})}),e[74]=ke,e[75]=Y,e[76]=q):q=e[76];let Ne;e[77]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(st,{children:"üìã ƒêi·ªÉm danh kh√°ch h√†ng"}),e[77]=Ne):Ne=e[77];let B;e[78]!==n.title?(B=t.jsxs(et,{children:[Ne,t.jsxs(tt,{children:["ƒê√°nh d·∫•u nh·ªØng kh√°ch c√≥ m·∫∑t t·∫°i ƒëi·ªÉm ",n.title]})]}),e[78]=n.title,e[79]=B):B=e[79];let A;e[80]!==r||e[81]!==ye||e[82]!==l.length||e[83]!==x?(A=t.jsx(G,{children:l.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Kh√¥ng c√≥ kh√°ch h√†ng n√†o"}):t.jsx("div",{className:"space-y-2",children:Object.entries(x).map(s=>{const[i,o]=s,Fe=o[0]?.booking,qe=ye.has(i),Ve=o.filter(a=>r[a.id]?.is_present).length;return t.jsx(Xe,{open:qe,onOpenChange:()=>Oe(i),children:t.jsxs("div",{className:"border rounded-lg",children:[t.jsx(Ye,{className:"w-full",children:t.jsx("div",{className:"flex items-center justify-between p-3 hover:bg-muted/50 transition-colors",children:t.jsxs("div",{className:"flex items-center gap-3",children:[qe?t.jsx(ct,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(Je,{className:"h-4 w-4 text-muted-foreground"}),t.jsx(K,{variant:"secondary",className:"font-medium",children:i}),Fe?.status===0&&t.jsx(K,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Ch·ªù x√°c nh·∫≠n"}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.length," kh√°ch)"]}),qe&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["‚Ä¢ ",Ve,"/",o.length," c√≥ m·∫∑t"]})]})})}),t.jsx(Qe,{children:t.jsx("div",{className:"border-t",children:t.jsxs(nt,{children:[t.jsx(rt,{children:t.jsxs(Re,{children:[t.jsx(m,{className:"w-[60px]",children:"C√≥ m·∫∑t"}),t.jsx(m,{children:"#"}),t.jsx(m,{children:"H·ªç t√™n"}),t.jsx(m,{children:"SƒêT"}),t.jsx(m,{children:"CCCD"}),t.jsx(m,{children:"Lo·∫°i"}),t.jsx(m,{children:"Y√™u c·∫ßu ƒë·∫∑c bi·ªát"}),t.jsx(m,{children:"Ghi ch√∫"})]})}),t.jsx(at,{children:o.map((a,$e)=>t.jsxs(Re,{className:r[a.id]?.is_present?"bg-green-50":"",children:[t.jsx(d,{children:t.jsx(it,{checked:r[a.id]?.is_present||!1,onCheckedChange:()=>Ie(a.id)})}),t.jsx(d,{children:$e+1}),t.jsx(d,{className:"font-medium",children:t.jsxs("div",{className:"flex items-center gap-2",children:[r[a.id]?.is_present?t.jsx(Be,{className:"h-4 w-4 text-green-500"}):t.jsx(Ae,{className:"h-4 w-4 text-red-400"}),a.fullname]})}),t.jsx(d,{className:"font-mono text-sm",children:a.phone||"-"}),t.jsx(d,{children:a.cccd||"-"}),t.jsx(d,{children:t.jsx(K,{variant:"outline",children:ft[a.type]||"N/A"})}),t.jsx(d,{className:"max-w-[150px]",children:a.request&&a.request.trim()!==""?t.jsxs("div",{className:"space-y-1",children:[t.jsxs(K,{variant:"outline",className:"bg-orange-50 text-orange-800 border-orange-300 text-xs",children:[t.jsx(De,{className:"h-3 w-3 mr-1"}),"C√≥ y√™u c·∫ßu"]}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",title:a.request,children:a.request})]}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),t.jsx(d,{children:t.jsx(lt,{placeholder:"Ghi ch√∫...",className:"h-8 w-40",value:r[a.id]?.notes||"",onChange:Ge=>Pe(a.id,Ge.target.value)})})]},a.id))})]})})})]})},i)})})}),e[80]=r,e[81]=ye,e[82]=l.length,e[83]=x,e[84]=A):A=e[84];let L;e[85]!==B||e[86]!==A?(L=t.jsxs($,{children:[B,A]}),e[85]=B,e[86]=A,e[87]=L):L=e[87];let H;e[88]!==r||e[89]!==l?(H=()=>{const s={};l.forEach(i=>{s[i.id]={is_present:!0,notes:r[i.id]?.notes||""}}),F(s)},e[88]=r,e[89]=l,e[90]=H):H=e[90];let be;e[91]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(Be,{className:"h-4 w-4 mr-2"}),e[91]=be):be=e[91];let R;e[92]!==H?(R=t.jsxs(_e,{variant:"outline",onClick:H,children:[be,"ƒê√°nh d·∫•u t·∫•t c·∫£ c√≥ m·∫∑t"]}),e[92]=H,e[93]=R):R=e[93];let D;e[94]!==r||e[95]!==l?(D=()=>{const s={};l.forEach(i=>{s[i.id]={is_present:!1,notes:r[i.id]?.notes||""}}),F(s)},e[94]=r,e[95]=l,e[96]=D):D=e[96];let Ce;e[97]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(Ae,{className:"h-4 w-4 mr-2"}),e[97]=Ce):Ce=e[97];let O;e[98]!==D?(O=t.jsxs(_e,{variant:"outline",onClick:D,children:[Ce,"B·ªè ch·ªçn t·∫•t c·∫£"]}),e[98]=D,e[99]=O):O=e[99];let I;e[100]!==R||e[101]!==O?(I=t.jsxs("div",{className:"flex gap-3",children:[R,O]}),e[100]=R,e[101]=O,e[102]=I):I=e[102];let P;e[103]!==v||e[104]!==E||e[105]!==q||e[106]!==L||e[107]!==I?(P=t.jsxs("div",{className:"space-y-6 p-6",children:[v,E,q,L,I]}),e[103]=v,e[104]=E,e[105]=q,e[106]=L,e[107]=I,e[108]=P):P=e[108];let ve;return e[109]!==f||e[110]!==P?(ve=t.jsxs(Ze,{children:[f,P]}),e[109]=f,e[110]=P,e[111]=ve):ve=e[111],ve}function ut(c){return t.jsx("div",{className:"bg-white rounded-lg p-3 border border-orange-200",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(K,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300",children:c.booking?.code||"N/A"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-sm",children:c.fullname}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.request})]})]})},c.id)}function pt(c){return c.is_present}function jt(c){const[e,n]=c;return{passenger_id:parseInt(e),is_present:n.is_present,notes:n.notes}}function gt(c){return c.request&&c.request.trim()!==""}function Nt(c){return c.request&&c.request.trim()!==""}export{ss as default};
