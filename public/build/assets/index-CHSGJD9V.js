import{c as ie,b as ce,u as ne,r as R,j as s,L as oe,a as Q,H as me}from"./app-Bzh0QcV-.js";import{A as he,a as de,b as pe}from"./alert-DfdtR1IU.js";import{B as S}from"./button-DLyenbHO.js";import{I as xe}from"./input-BI3Hn33c.js";import{b as U,e as c,a as ue,c as y,T as fe,d as je}from"./table-DiFZ2bUw.js";import{A as we}from"./app-layout-CMbpVfDp.js";import{s as _}from"./index-2FGh3n-F.js";import{t as se}from"./index-rXl9eqvF.js";import{ServiceAttributeFormDialog as ge}from"./dialog-BYMfPwwS.js";import{C as ve}from"./circle-check-Bf8bbdip.js";import{E as be}from"./eye-ClZbg0AX.js";import{P as Z}from"./pencil-DdbMNkgJ.js";import{T as Ne}from"./trash-2-BzQ-ycRS.js";import{S as ee}from"./search-BDN3BQf_.js";import"./app-AjfTabGW.js";import"./utils-D0Zg16Wk.js";import"./index-Cs37kpNU.js";import"./index-DXbMLhRD.js";import"./x-Cc7sq3My.js";import"./createLucideIcon-Qg7y1Ni9.js";import"./index-3aTD3_kd.js";import"./avatar-DMx0EJxa.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-Cbb-6XH_.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-CGelz8kl.js";import"./users-C6EN8SYz.js";import"./file-text-B2N7Qcbe.js";import"./badge-GiRAufZZ.js";import"./dialog-60B12crD.js";import"./textarea-BOc5ahgU.js";const Se=[{title:"Thuộc tính dịch vụ",href:_.index().url}];function os(){const e=ie.c(63),{attributes:i,flash:C,services:X,service_names:F,filters:W}=ce().props,{delete:K}=ne(),[r,te]=R.useState(W.search||""),[l,re]=R.useState(W.service_name||"all"),[G,M]=R.useState(!1),[T,Y]=R.useState(void 0);let A;e[0]!==r||e[1]!==l?(A=t=>{t.preventDefault(),Q.get(_.index().url,{search:r,service_name:l==="all"?"":l},{preserveState:!0,replace:!0,preserveScroll:!0})},e[0]=r,e[1]=l,e[2]=A):A=e[2];const n=A;let D;e[3]!==r?(D=t=>{const a=t.target.value;re(a),Q.get(_.index().url,{search:r,service_name:a==="all"?"":a},{preserveState:!0,replace:!0,preserveScroll:!0})},e[3]=r,e[4]=D):D=e[4];const V=D;let k;e[5]!==K?(k=(t,a)=>{confirm(`Bạn có chắc muốn xóa thuộc tính "${a}"?`)&&K(_.destroy(t).url,{onSuccess:_e,onError:Te})},e[5]=K,e[6]=k):k=e[6];const q=k;let E;e[7]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{Y(void 0),M(!0)},e[7]=E):E=e[7];const ae=E;let H;e[8]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(me,{title:"Thuộc tính dịch vụ"}),e[8]=H):H=e[8];let o;e[9]!==C.message?(o=C.message&&s.jsx("div",{className:"m-4",children:s.jsxs(he,{className:"border-green-200 bg-green-50",children:[s.jsx(ve,{className:"h-4 w-4 text-green-600"}),s.jsx(de,{className:"text-green-800",children:"Thông báo!"}),s.jsx(pe,{className:"text-green-700",children:C.message})]})}),e[9]=C.message,e[10]=o):o=e[10];let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=t=>te(t.target.value),e[11]=I):I=e[11];let m;e[12]!==r?(m=s.jsx(xe,{value:r,onChange:I,placeholder:"Tìm theo tên, giá trị, loại hoặc dịch vụ...",className:"w-full flex-1"}),e[12]=r,e[13]=m):m=e[13];let L;e[14]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(S,{type:"submit",variant:"secondary",className:"max-md:hidden",children:s.jsx(ee,{className:"h-4 w-4"})}),e[14]=L):L=e[14];let h;e[15]!==n||e[16]!==m?(h=s.jsxs("form",{onSubmit:n,className:"flex w-full items-center gap-2 md:flex-1",children:[m,L]}),e[15]=n,e[16]=m,e[17]=h):h=e[17];let $;e[18]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("option",{value:"all",children:"Tất cả dịch vụ"}),e[18]=$):$=e[18];let d;e[19]!==F?(d=F.map(ye),e[19]=F,e[20]=d):d=e[20];let p;e[21]!==V||e[22]!==l||e[23]!==d?(p=s.jsxs("select",{value:l,onChange:V,className:"w-full rounded-md border border-gray-300 px-3 py-2 md:w-auto",children:[$,d]}),e[21]=V,e[22]=l,e[23]=d,e[24]=p):p=e[24];let B;e[25]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(ee,{className:"mr-2 h-4 w-4"}),e[25]=B):B=e[25];let x;e[26]!==n?(x=s.jsxs(S,{onClick:n,className:"w-full md:hidden",children:[B," Tìm kiếm"]}),e[26]=n,e[27]=x):x=e[27];let u;e[28]!==p||e[29]!==x||e[30]!==h?(u=s.jsxs("div",{className:"flex flex-col gap-3 md:w-2/3 md:flex-row md:items-center",children:[h,p,x]}),e[28]=p,e[29]=x,e[30]=h,e[31]=u):u=e[31];let z;e[32]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs(S,{onClick:ae,className:"w-full md:w-auto",children:[s.jsx(Z,{className:"mr-2 h-4 w-4"})," Thêm Thuộc tính"]}),e[32]=z):z=e[32];let f;e[33]!==u?(f=s.jsxs("div",{className:"m-4 flex flex-col justify-between gap-3 md:flex-row md:items-center",children:[u,z]}),e[33]=u,e[34]=f):f=e[34];let O;e[35]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(ue,{children:s.jsxs(U,{children:[s.jsx(y,{className:"w-[50px] text-center whitespace-nowrap",children:"#"}),s.jsx(y,{className:"whitespace-nowrap",children:"Tên thuộc tính"}),s.jsx(y,{className:"whitespace-nowrap",children:"Dịch vụ"}),s.jsx(y,{className:"whitespace-nowrap",children:"Giá trị"}),s.jsx(y,{className:"whitespace-nowrap",children:"Loại"}),s.jsx(y,{className:"text-center whitespace-nowrap",children:"Hành động"})]})}),e[35]=O):O=e[35];let j;e[36]!==i.data||e[37]!==q?(j=i.data.length===0?s.jsx(U,{children:s.jsx(c,{colSpan:6,className:"py-8 text-center text-gray-500",children:"Không có thuộc tính nào."})}):i.data.map((t,a)=>s.jsxs(U,{children:[s.jsx(c,{className:"text-center whitespace-nowrap",children:a+1}),s.jsx(c,{className:"whitespace-nowrap",children:t.name}),s.jsx(c,{className:"whitespace-nowrap",children:t.service?.name||"—"}),s.jsx(c,{className:"whitespace-nowrap",children:t.value||"—"}),s.jsx(c,{className:"whitespace-nowrap",children:t.type||"—"}),s.jsx(c,{className:"whitespace-nowrap",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(oe,{href:_.show(t.id).url,children:s.jsx(S,{variant:"ghost",size:"sm",title:"Xem chi tiết",children:s.jsx(be,{className:"h-4 w-4"})})}),s.jsx(S,{variant:"ghost",size:"sm",title:"Chỉnh sửa",onClick:()=>{Y(t),M(!0)},children:s.jsx(Z,{className:"h-4 w-4"})}),s.jsx(S,{variant:"ghost",size:"sm",title:"Xóa",className:"text-red-500 hover:text-red-700",onClick:()=>q(t.id,t.name),children:s.jsx(Ne,{className:"h-4 w-4"})})]})})]},t.id)),e[36]=i.data,e[37]=q,e[38]=j):j=e[38];let w;e[39]!==j?(w=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fe,{className:"min-w-full",children:[O,s.jsx(je,{children:j})]})}),e[39]=j,e[40]=w):w=e[40];let g;if(e[41]!==i.links||e[42]!==r||e[43]!==l){let t;e[45]!==r||e[46]!==l?(t=(a,le)=>s.jsx("button",{disabled:!a.url,onClick:()=>{a.url&&Q.get(a.url,{search:r,service_name:l==="all"?"":l},{preserveScroll:!0,preserveState:!0,replace:!0})},className:`rounded-md border px-3 py-1 text-sm ${a.active?"border-blue-600 bg-blue-600 text-white":"border-gray-200 bg-white text-gray-700 hover:bg-gray-100"} ${a.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:a.label}},le),e[45]=r,e[46]=l,e[47]=t):t=e[47],g=i.links.map(t),e[41]=i.links,e[42]=r,e[43]=l,e[44]=g}else g=e[44];let v;e[48]!==g?(v=s.jsx("div",{className:"flex flex-wrap justify-center gap-2 p-4",children:g}),e[48]=g,e[49]=v):v=e[49];let b;e[50]!==w||e[51]!==v?(b=s.jsxs("div",{className:"m-8 rounded-lg border bg-white shadow-sm",children:[w,v]}),e[50]=w,e[51]=v,e[52]=b):b=e[52];const J=T?`Chỉnh sửa: ${T.name}`:"Thêm Thuộc Tính Dịch Vụ";let N;e[53]!==T||e[54]!==G||e[55]!==X||e[56]!==J?(N=s.jsx(ge,{open:G,onOpenChange:M,initialData:T,services:X,title:J}),e[53]=T,e[54]=G,e[55]=X,e[56]=J,e[57]=N):N=e[57];let P;return e[58]!==f||e[59]!==b||e[60]!==N||e[61]!==o?(P=s.jsxs(we,{breadcrumbs:Se,children:[H,o,f,b,N]}),e[58]=f,e[59]=b,e[60]=N,e[61]=o,e[62]=P):P=e[62],P}function ye(e,i){return s.jsx("option",{value:e,children:e},i)}function Te(){return se.error("Không thể xóa.")}function _e(){return se.success("Xóa thành công!")}export{os as default};
