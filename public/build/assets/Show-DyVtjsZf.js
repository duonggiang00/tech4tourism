import{c as ot,r as We,u as Ze,j as t,H as mt,a as dt}from"./app-jK4qC5mS.js";import{b as Y,A as ht}from"./app-layout-CRug86Ft.js";import{B as xt}from"./badge-CgsJR6-J.js";import{B as K}from"./button-CbjqQSYC.js";import{b as Ae,C as ke,a as we,c as He}from"./card-B4BPmPsF.js";import{D as ft,a as jt,b as gt,c as pt,d as ut}from"./dialog-vZSf95IW.js";import{S as _t,a as bt,b as Nt,c as Be,d as yt}from"./select-ykbT3YN1.js";import{L as St}from"./label-D5rypICj.js";import{T as vt,a as Tt,b as et,c as Q,d as Ct,e as q}from"./table-vcSeCQFs.js";import{A as tt,a as st,b as lt}from"./alert-DI_7dO1h.js";import{a as Dt,b as At,A as kt,c as wt,d as Ht,e as Bt,f as Et,g as Lt}from"./alert-dialog-CMBKvluG.js";import{C as Ot}from"./circle-check-BqPQtH70.js";import{C as Pt}from"./circle-x-CCkndR1a.js";import{A as It}from"./arrow-left-DlJQJ3pB.js";import{T as Vt}from"./trash-2-CnNKrcSB.js";import{C as Ft,U as Ut}from"./users-BMKuDtIB.js";import{M as Rt,P as Xt}from"./phone-B6I4Tscd.js";import{D as $t}from"./dollar-sign-C9SewBpy.js";import"./app-B32Q6Rc9.js";import"./utils-D0Zg16Wk.js";import"./index-DrepN1D_.js";import"./index-BY1UvJ8l.js";import"./x-CqTXyibP.js";import"./createLucideIcon-Dv7VkWmT.js";import"./index-CD0XU3oY.js";import"./avatar-ApwrDypj.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-BgMMptVa.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./file-text-B4sExV2-.js";import"./index-DP83cKko.js";import"./index-B4_oT4wZ.js";const it={0:{label:"Chờ xử lý",color:"bg-yellow-500"},1:{label:"Đã xác nhận",color:"bg-green-500"},2:{label:"Đã hủy",color:"bg-red-500"},3:{label:"Hoàn thành",color:"bg-blue-500"}},Gt={0:"Nam",1:"Nữ"},Mt={0:"Người lớn",1:"Trẻ em",2:"Em bé"};function Os(a){const e=ot.c(146),{booking:s,flash:i}=a,[Ee,z]=We.useState(!1),[Le,Je]=We.useState(!1);let J;e[0]!==s.status?(J={status:s.status},e[0]=s.status,e[1]=J):J=e[1];const{data:at,setData:Oe,put:Pe,processing:W,errors:Z}=Ze(J),{delete:Ie,processing:ee}=Ze();let te;e[2]===Symbol.for("react.memo_cache_sentinel")?(te={title:"Quản lý Bookings",href:Y.index().url},e[2]=te):te=e[2];const Ve=`Chi tiết: ${s.code}`;let r;e[3]!==s.id?(r=Y.show(s.id),e[3]=s.id,e[4]=r):r=e[4];let se;e[5]!==Ve||e[6]!==r.url?(se=[te,{title:Ve,href:r.url}],e[5]=Ve,e[6]=r.url,e[7]=se):se=e[7];const Fe=se,rt=Yt,Ue=Kt,nt=qt;let le;e[8]!==s.id||e[9]!==Pe?(le=l=>{l.preventDefault(),Pe(Y.update(s.id).url,{onSuccess:()=>{z(!1)}})},e[8]=s.id,e[9]=Pe,e[10]=le):le=e[10];const Re=le;let ie;e[11]!==s.id||e[12]!==Ie?(ie=()=>{Ie(Y.destroy(s.id).url)},e[11]=s.id,e[12]=Ie,e[13]=ie):ie=e[13];const Xe=ie,ct=Qt,$e=`Chi tiết Booking: ${s.code}`;let n;e[14]!==$e?(n=t.jsx(mt,{title:$e}),e[14]=$e,e[15]=n):n=e[15];let c;e[16]!==i?(c=i?.success&&t.jsxs(tt,{variant:"default",className:"bg-green-50 border-green-200 mb-4",children:[t.jsx(Ot,{className:"h-4 w-4 text-green-600"}),t.jsx(st,{className:"text-green-800",children:"Thành công!"}),t.jsx(lt,{className:"text-green-700",children:i.success})]}),e[16]=i,e[17]=c):c=e[17];let o;e[18]!==i?(o=i?.error&&t.jsxs(tt,{variant:"destructive",className:"mb-4",children:[t.jsx(Pt,{className:"h-4 w-4"}),t.jsx(st,{children:"Lỗi!"}),t.jsx(lt,{children:i.error})]}),e[18]=i,e[19]=o):o=e[19];let ae;e[20]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(K,{variant:"ghost",onClick:ct,className:"mb-4 pl-0 hover:bg-transparent hover:text-blue-600",children:[t.jsx(It,{className:"mr-2 h-4 w-4"}),"Quay lại danh sách"]}),e[20]=ae):ae=e[20];let m;e[21]!==s.code?(m=t.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:["Booking: ",s.code]}),e[21]=s.code,e[22]=m):m=e[22];const Ge=it[s.status]?.color||"bg-gray-500",Me=it[s.status]?.label||"Unknown";let d;e[23]!==Ge||e[24]!==Me?(d=t.jsx(xt,{className:Ge,children:Me}),e[23]=Ge,e[24]=Me,e[25]=d):d=e[25];let h;e[26]!==m||e[27]!==d?(h=t.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[m,d]}),e[26]=m,e[27]=d,e[28]=h):h=e[28];let x;e[29]!==s.created_at?(x=nt(s.created_at),e[29]=s.created_at,e[30]=x):x=e[30];let f;e[31]!==x?(f=t.jsxs("p",{className:"text-gray-600",children:["Ngày tạo: ",x]}),e[31]=x,e[32]=f):f=e[32];let j;e[33]!==h||e[34]!==f?(j=t.jsxs("div",{children:[h,f]}),e[33]=h,e[34]=f,e[35]=j):j=e[35];let re;e[36]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(K,{variant:"outline",onClick:()=>z(!0),children:"Cập nhật trạng thái"}),e[36]=re):re=e[36];let ne;e[37]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs("div",{className:"flex gap-2",children:[re,t.jsxs(K,{variant:"destructive",onClick:()=>Je(!0),children:[t.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Xóa"]})]}),e[37]=ne):ne=e[37];let g;e[38]!==j?(g=t.jsxs("div",{className:"mb-6",children:[ae,t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[j,ne]})]}),e[38]=j,e[39]=g):g=e[39];let ce;e[40]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(ke,{children:t.jsxs(we,{className:"flex items-center gap-2",children:[t.jsx(Ft,{className:"h-5 w-5"}),"Thông tin Tour"]})}),e[40]=ce):ce=e[40];let oe;e[41]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("p",{className:"text-sm text-gray-500",children:"Tour"}),e[41]=oe):oe=e[41];const Qe=s.tour?.title||"N/A";let p;e[42]!==Qe?(p=t.jsxs("div",{children:[oe,t.jsx("p",{className:"font-medium",children:Qe})]}),e[42]=Qe,e[43]=p):p=e[43];let me;e[44]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-sm text-gray-500",children:"Ngày khởi hành"}),e[44]=me):me=e[44];let u;e[45]!==s.date_start?(u=Ue(s.date_start),e[45]=s.date_start,e[46]=u):u=e[46];let _;e[47]!==u?(_=t.jsxs("div",{children:[me,t.jsx("p",{className:"font-medium",children:u})]}),e[47]=u,e[48]=_):_=e[48];let b;e[49]!==s.date_end?(b=s.date_end&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Ngày kết thúc"}),t.jsx("p",{className:"font-medium",children:Ue(s.date_end)})]}),e[49]=s.date_end,e[50]=b):b=e[50];let N;e[51]!==s.tour?(N=s.tour&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Thời gian"}),t.jsxs("p",{className:"font-medium",children:[s.tour.day," ngày ",s.tour.night," đêm"]})]}),e[51]=s.tour,e[52]=N):N=e[52];let y;e[53]!==p||e[54]!==_||e[55]!==b||e[56]!==N?(y=t.jsxs(Ae,{children:[ce,t.jsxs(He,{className:"space-y-3",children:[p,_,b,N]})]}),e[53]=p,e[54]=_,e[55]=b,e[56]=N,e[57]=y):y=e[57];let de;e[58]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(ke,{children:t.jsxs(we,{className:"flex items-center gap-2",children:[t.jsx(Ut,{className:"h-5 w-5"}),"Thông tin Khách hàng"]})}),e[58]=de):de=e[58];let he;e[59]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("p",{className:"text-sm text-gray-500",children:"Tên"}),e[59]=he):he=e[59];let S;e[60]!==s.client_name?(S=t.jsxs("div",{children:[he,t.jsx("p",{className:"font-medium",children:s.client_name})]}),e[60]=s.client_name,e[61]=S):S=e[61];let xe,fe;e[62]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(Rt,{className:"h-4 w-4 text-gray-400"}),fe=t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e[62]=xe,e[63]=fe):(xe=e[62],fe=e[63]);let v;e[64]!==s.client_email?(v=t.jsxs("div",{className:"flex items-center gap-2",children:[xe,t.jsxs("div",{children:[fe,t.jsx("p",{className:"font-medium",children:s.client_email})]})]}),e[64]=s.client_email,e[65]=v):v=e[65];let je,ge;e[66]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),ge=t.jsx("p",{className:"text-sm text-gray-500",children:"Số điện thoại"}),e[66]=je,e[67]=ge):(je=e[66],ge=e[67]);let T;e[68]!==s.client_phone?(T=t.jsxs("div",{className:"flex items-center gap-2",children:[je,t.jsxs("div",{children:[ge,t.jsx("p",{className:"font-medium",children:s.client_phone})]})]}),e[68]=s.client_phone,e[69]=T):T=e[69];let C;e[70]!==S||e[71]!==v||e[72]!==T?(C=t.jsxs(Ae,{children:[de,t.jsxs(He,{className:"space-y-3",children:[S,v,T]})]}),e[70]=S,e[71]=v,e[72]=T,e[73]=C):C=e[73];let pe;e[74]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(ke,{children:t.jsxs(we,{className:"flex items-center gap-2",children:[t.jsx($t,{className:"h-5 w-5"}),"Thông tin Thanh toán"]})}),e[74]=pe):pe=e[74];let ue;e[75]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("p",{className:"text-sm text-gray-500",children:"Tổng tiền"}),e[75]=ue):ue=e[75];let D;e[76]!==s.final_price?(D=rt(s.final_price),e[76]=s.final_price,e[77]=D):D=e[77];let A;e[78]!==D?(A=t.jsxs("div",{children:[ue,t.jsx("p",{className:"text-xl font-bold text-green-600",children:D})]}),e[78]=D,e[79]=A):A=e[79];let _e;e[80]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("p",{className:"text-sm text-gray-500",children:"Số người"}),e[80]=_e):_e=e[80];const qe=s.count_children>0&&`, ${s.count_children} trẻ em`;let k;e[81]!==s.count_adult||e[82]!==qe?(k=t.jsxs("div",{children:[_e,t.jsxs("p",{className:"font-medium",children:[s.count_adult," người lớn",qe]})]}),e[81]=s.count_adult,e[82]=qe,e[83]=k):k=e[83];let w;e[84]!==A||e[85]!==k?(w=t.jsxs(Ae,{children:[pe,t.jsxs(He,{className:"space-y-3",children:[A,k]})]}),e[84]=A,e[85]=k,e[86]=w):w=e[86];let H;e[87]!==y||e[88]!==C||e[89]!==w?(H=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[y,C,w]}),e[87]=y,e[88]=C,e[89]=w,e[90]=H):H=e[90];let B;e[91]!==s.passengers?(B=s.passengers&&s.passengers.length>0&&t.jsxs(Ae,{className:"mt-6",children:[t.jsx(ke,{children:t.jsx(we,{children:"Danh sách Hành khách"})}),t.jsx(He,{children:t.jsxs(vt,{children:[t.jsx(Tt,{children:t.jsxs(et,{children:[t.jsx(Q,{children:"Họ tên"}),t.jsx(Q,{children:"SĐT"}),t.jsx(Q,{children:"Giới tính"}),t.jsx(Q,{children:"Loại"}),t.jsx(Q,{children:"Ngày sinh"}),t.jsx(Q,{children:"Ghi chú"})]})}),t.jsx(Ct,{children:s.passengers.map(l=>t.jsxs(et,{children:[t.jsx(q,{className:"font-medium",children:l.fullname}),t.jsx(q,{children:l.phone||"-"}),t.jsx(q,{children:Gt[l.gender]||"N/A"}),t.jsx(q,{children:Mt[l.type]||"N/A"}),t.jsx(q,{children:l.birth?Ue(l.birth):"N/A"}),t.jsx(q,{children:l.request||"-"})]},l.id))})]})})]}),e[91]=s.passengers,e[92]=B):B=e[92];let E;e[93]!==g||e[94]!==H||e[95]!==B?(E=t.jsxs("div",{className:"mx-auto max-w-6xl",children:[g,H,B]}),e[93]=g,e[94]=H,e[95]=B,e[96]=E):E=e[96];let L;e[97]!==c||e[98]!==o||e[99]!==E?(L=t.jsxs("div",{className:"min-h-screen bg-gray-50 p-8",children:[c,o,E]}),e[97]=c,e[98]=o,e[99]=E,e[100]=L):L=e[100];let be;e[101]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(ft,{children:t.jsx(jt,{children:"Cập nhật trạng thái"})}),e[101]=be):be=e[101];let Ne;e[102]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(St,{children:"Trạng thái"}),e[102]=Ne):Ne=e[102];const Ke=String(at.status);let O;e[103]!==Oe?(O=l=>Oe("status",parseInt(l)),e[103]=Oe,e[104]=O):O=e[104];let ye;e[105]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(_t,{children:t.jsx(bt,{placeholder:"Chọn trạng thái"})}),e[105]=ye):ye=e[105];let Se;e[106]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsxs(Nt,{children:[t.jsx(Be,{value:"0",children:"Chờ xử lý"}),t.jsx(Be,{value:"1",children:"Đã xác nhận"}),t.jsx(Be,{value:"2",children:"Đã hủy"}),t.jsx(Be,{value:"3",children:"Hoàn thành"})]}),e[106]=Se):Se=e[106];let P;e[107]!==Ke||e[108]!==O?(P=t.jsxs(yt,{value:Ke,onValueChange:O,children:[ye,Se]}),e[107]=Ke,e[108]=O,e[109]=P):P=e[109];let I;e[110]!==Z.status?(I=Z.status&&t.jsx("div",{className:"text-red-500 text-sm",children:Z.status}),e[110]=Z.status,e[111]=I):I=e[111];let V;e[112]!==P||e[113]!==I?(V=t.jsxs("div",{className:"space-y-2",children:[Ne,P,I]}),e[112]=P,e[113]=I,e[114]=V):V=e[114];let ve;e[115]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(K,{type:"button",variant:"ghost",onClick:()=>z(!1),children:"Hủy"}),e[115]=ve):ve=e[115];const Ye=W?"Đang lưu...":"Lưu";let F;e[116]!==W||e[117]!==Ye?(F=t.jsxs(gt,{children:[ve,t.jsx(K,{type:"submit",disabled:W,children:Ye})]}),e[116]=W,e[117]=Ye,e[118]=F):F=e[118];let U;e[119]!==Re||e[120]!==V||e[121]!==F?(U=t.jsxs(pt,{children:[be,t.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[V,F]})]}),e[119]=Re,e[120]=V,e[121]=F,e[122]=U):U=e[122];let R;e[123]!==Ee||e[124]!==U?(R=t.jsx(ut,{open:Ee,onOpenChange:z,children:U}),e[123]=Ee,e[124]=U,e[125]=R):R=e[125];let Te;e[126]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(kt,{children:"Xác nhận xóa booking"}),e[126]=Te):Te=e[126];let X;e[127]!==s.code?(X=t.jsxs(Dt,{children:[Te,t.jsxs(At,{children:["Bạn có chắc chắn muốn xóa booking ",t.jsx("strong",{children:s.code}),"? Hành động này không thể hoàn tác."]})]}),e[127]=s.code,e[128]=X):X=e[128];let Ce;e[129]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(wt,{children:"Hủy"}),e[129]=Ce):Ce=e[129];const ze=ee?"Đang xóa...":"Xóa";let $;e[130]!==ee||e[131]!==Xe||e[132]!==ze?($=t.jsxs(Ht,{children:[Ce,t.jsx(Bt,{onClick:Xe,disabled:ee,className:"bg-red-600 hover:bg-red-700",children:ze})]}),e[130]=ee,e[131]=Xe,e[132]=ze,e[133]=$):$=e[133];let G;e[134]!==X||e[135]!==$?(G=t.jsxs(Et,{children:[X,$]}),e[134]=X,e[135]=$,e[136]=G):G=e[136];let M;e[137]!==Le||e[138]!==G?(M=t.jsx(Lt,{open:Le,onOpenChange:Je,children:G}),e[137]=Le,e[138]=G,e[139]=M):M=e[139];let De;return e[140]!==Fe||e[141]!==L||e[142]!==R||e[143]!==M||e[144]!==n?(De=t.jsxs(ht,{breadcrumbs:Fe,children:[n,L,R,M]}),e[140]=Fe,e[141]=L,e[142]=R,e[143]=M,e[144]=n,e[145]=De):De=e[145],De}function Qt(){dt.visit(Y.index().url)}function qt(a){return new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Kt(a){return new Date(a).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"})}function Yt(a){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(a)}export{Os as default};
