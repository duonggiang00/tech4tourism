import{r,c as ne,j as J}from"./app-CQY01_Hl.js";import{c as ee}from"./utils-D0Zg16Wk.js";import{q as Te,a as De,r as Oe}from"./index-B3vMSVka.js";var Ae=Object.defineProperty,Fe=Object.defineProperties,We=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,be=(t,e,n)=>e in t?Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Be=(t,e)=>{for(var n in e||(e={}))ye.call(e,n)&&be(t,n,e[n]);if(te)for(var n of te(e))Se.call(e,n)&&be(t,n,e[n]);return t},Ie=(t,e)=>Fe(t,We(e)),Ne=(t,e)=>{var n={};for(var a in t)ye.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&te)for(var a of te(t))e.indexOf(a)<0&&Se.call(t,a)&&(n[a]=t[a]);return n};function $e(t){let e=setTimeout(t,0),n=setTimeout(t,10),a=setTimeout(t,50);return[e,n,a]}function He(t){let e=r.useRef();return r.useEffect(()=>{e.current=t}),e.current}var Le=18,we=40,Ge=`${we}px`,Ke=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function qe({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:a}){let[s,i]=r.useState(!1),[f,m]=r.useState(!1),[y,w]=r.useState(!1),h=r.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&s&&f,[s,f,n]),g=r.useCallback(()=>{let p=t.current,_=e.current;if(!p||!_||y||n==="none")return;let b=p,x=b.getBoundingClientRect().left+b.offsetWidth,k=b.getBoundingClientRect().top+b.offsetHeight/2,c=x-Le,R=k;document.querySelectorAll(Ke).length===0&&document.elementFromPoint(c,R)===p||(i(!0),w(!0))},[t,e,y,n]);return r.useEffect(()=>{let p=t.current;if(!p||n==="none")return;function _(){let x=window.innerWidth-p.getBoundingClientRect().right;m(x>=we)}_();let b=setInterval(_,1e3);return()=>{clearInterval(b)}},[t,n]),r.useEffect(()=>{let p=a||document.activeElement===e.current;if(n==="none"||!p)return;let _=setTimeout(g,0),b=setTimeout(g,2e3),x=setTimeout(g,5e3),k=setTimeout(()=>{w(!0)},6e3);return()=>{clearTimeout(_),clearTimeout(b),clearTimeout(x),clearTimeout(k)}},[e,a,n,g]),{hasPWMBadge:s,willPushPWMBadge:h,PWM_BADGE_SPACE_WIDTH:Ge}}var Ee=r.createContext({}),xe=r.forwardRef((t,e)=>{var n=t,{value:a,onChange:s,maxLength:i,textAlign:f="left",pattern:m,placeholder:y,inputMode:w="numeric",onComplete:h,pushPasswordManagerStrategy:g="increase-width",pasteTransformer:p,containerClassName:_,noScriptCSSFallback:b=ze,render:x,children:k}=n,c=Ne(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),R,X,A,Z,F;let[re,H]=r.useState(typeof c.defaultValue=="string"?c.defaultValue:""),u=a??re,W=He(u),K=r.useCallback(l=>{s?.(l),H(l)},[s]),j=r.useMemo(()=>m?typeof m=="string"?new RegExp(m):m:null,[m]),v=r.useRef(null),ae=r.useRef(null),le=r.useRef({value:u,onChange:K,isIOS:typeof window<"u"&&((X=(R=window?.CSS)==null?void 0:R.supports)==null?void 0:X.call(R,"-webkit-touch-callout","none"))}),U=r.useRef({prev:[(A=v.current)==null?void 0:A.selectionStart,(Z=v.current)==null?void 0:Z.selectionEnd,(F=v.current)==null?void 0:F.selectionDirection]});r.useImperativeHandle(e,()=>v.current,[]),r.useEffect(()=>{let l=v.current,o=ae.current;if(!l||!o)return;le.current.value!==l.value&&le.current.onChange(l.value),U.current.prev=[l.selectionStart,l.selectionEnd,l.selectionDirection];function S(){if(document.activeElement!==l){z(null),Q(null);return}let d=l.selectionStart,E=l.selectionEnd,Y=l.selectionDirection,M=l.maxLength,I=l.value,T=U.current.prev,D=-1,O=-1,N;if(I.length!==0&&d!==null&&E!==null){let Me=d===E,Re=d===I.length&&I.length<M;if(Me&&!Re){let $=d;if($===0)D=0,O=1,N="forward";else if($===M)D=$-1,O=$,N="backward";else if(M>1&&I.length>1){let se=0;if(T[0]!==null&&T[1]!==null){N=$<T[1]?"backward":"forward";let je=T[0]===T[1]&&T[0]<M;N==="backward"&&!je&&(se=-1)}D=se+$,O=se+$+1}}D!==-1&&O!==-1&&D!==O&&v.current.setSelectionRange(D,O,N)}let he=D!==-1?D:d,ge=O!==-1?O:E,ke=N??Y;z(he),Q(ge),U.current.prev=[he,ge,ke]}if(document.addEventListener("selectionchange",S,{capture:!0}),S(),document.activeElement===l&&oe(!0),!document.getElementById("input-otp-style")){let d=document.createElement("style");if(d.id="input-otp-style",document.head.appendChild(d),d.sheet){let E="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";V(d.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),V(d.sheet,`[data-input-otp]:autofill { ${E} }`),V(d.sheet,`[data-input-otp]:-webkit-autofill { ${E} }`),V(d.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),V(d.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let C=()=>{o&&o.style.setProperty("--root-height",`${l.clientHeight}px`)};C();let P=new ResizeObserver(C);return P.observe(l),()=>{document.removeEventListener("selectionchange",S,{capture:!0}),P.disconnect()}},[]);let[ue,de]=r.useState(!1),[q,oe]=r.useState(!1),[B,z]=r.useState(null),[L,Q]=r.useState(null);r.useEffect(()=>{$e(()=>{var l,o,S,C;(l=v.current)==null||l.dispatchEvent(new Event("input"));let P=(o=v.current)==null?void 0:o.selectionStart,d=(S=v.current)==null?void 0:S.selectionEnd,E=(C=v.current)==null?void 0:C.selectionDirection;P!==null&&d!==null&&(z(P),Q(d),U.current.prev=[P,d,E])})},[u,q]),r.useEffect(()=>{W!==void 0&&u!==W&&W.length<i&&u.length===i&&h?.(u)},[i,h,W,u]);let G=qe({containerRef:ae,inputRef:v,pushPasswordManagerStrategy:g,isFocused:q}),pe=r.useCallback(l=>{let o=l.currentTarget.value.slice(0,i);if(o.length>0&&j&&!j.test(o)){l.preventDefault();return}typeof W=="string"&&o.length<W.length&&document.dispatchEvent(new Event("selectionchange")),K(o)},[i,K,W,j]),fe=r.useCallback(()=>{var l;if(v.current){let o=Math.min(v.current.value.length,i-1),S=v.current.value.length;(l=v.current)==null||l.setSelectionRange(o,S),z(o),Q(S)}oe(!0)},[i]),me=r.useCallback(l=>{var o,S;let C=v.current;if(!p&&(!le.current.isIOS||!l.clipboardData||!C))return;let P=l.clipboardData.getData("text/plain"),d=p?p(P):P;l.preventDefault();let E=(o=v.current)==null?void 0:o.selectionStart,Y=(S=v.current)==null?void 0:S.selectionEnd,M=(E!==Y?u.slice(0,E)+d+u.slice(Y):u.slice(0,E)+d+u.slice(E)).slice(0,i);if(M.length>0&&j&&!j.test(M))return;C.value=M,K(M);let I=Math.min(M.length,i-1),T=M.length;C.setSelectionRange(I,T),z(I),Q(T)},[i,K,j,u]),Ce=r.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),ve=r.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:f,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,f]),Pe=r.useMemo(()=>r.createElement("input",Ie(Be({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":u.length===0||void 0,"data-input-otp-mss":B,"data-input-otp-mse":L,inputMode:w,pattern:j?.source,"aria-placeholder":y,style:ve,maxLength:i,value:u,ref:v,onPaste:l=>{var o;me(l),(o=c.onPaste)==null||o.call(c,l)},onChange:pe,onMouseOver:l=>{var o;de(!0),(o=c.onMouseOver)==null||o.call(c,l)},onMouseLeave:l=>{var o;de(!1),(o=c.onMouseLeave)==null||o.call(c,l)},onFocus:l=>{var o;fe(),(o=c.onFocus)==null||o.call(c,l)},onBlur:l=>{var o;oe(!1),(o=c.onBlur)==null||o.call(c,l)}})),[pe,fe,me,w,ve,i,L,B,c,j?.source,u]),ie=r.useMemo(()=>({slots:Array.from({length:i}).map((l,o)=>{var S;let C=q&&B!==null&&L!==null&&(B===L&&o===B||o>=B&&o<L),P=u[o]!==void 0?u[o]:null,d=u[0]!==void 0?null:(S=y?.[o])!=null?S:null;return{char:P,placeholderChar:d,isActive:C,hasFakeCaret:C&&P===null}}),isFocused:q,isHovering:!c.disabled&&ue}),[q,ue,i,L,B,c.disabled,u]),_e=r.useMemo(()=>x?x(ie):r.createElement(Ee.Provider,{value:ie},k),[k,ie,x]);return r.createElement(r.Fragment,null,b!==null&&r.createElement("noscript",null,r.createElement("style",null,b)),r.createElement("div",{ref:ae,"data-input-otp-container":!0,style:Ce,className:_},_e,r.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Pe)))});xe.displayName="Input";function V(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var ze=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,Ye="^\\d+$";function et(t){const e=ne.c(12);let n,a,s;e[0]!==t?({className:n,containerClassName:a,...s}=t,e[0]=t,e[1]=n,e[2]=a,e[3]=s):(n=e[1],a=e[2],s=e[3]);let i;e[4]!==a?(i=ee("flex items-center gap-2 has-disabled:opacity-50",a),e[4]=a,e[5]=i):i=e[5];let f;e[6]!==n?(f=ee("disabled:cursor-not-allowed",n),e[6]=n,e[7]=f):f=e[7];let m;return e[8]!==s||e[9]!==i||e[10]!==f?(m=J.jsx(xe,{"data-slot":"input-otp",containerClassName:i,className:f,...s}),e[8]=s,e[9]=i,e[10]=f,e[11]=m):m=e[11],m}function tt(t){const e=ne.c(8);let n,a;e[0]!==t?({className:n,...a}=t,e[0]=t,e[1]=n,e[2]=a):(n=e[1],a=e[2]);let s;e[3]!==n?(s=ee("flex items-center",n),e[3]=n,e[4]=s):s=e[4];let i;return e[5]!==a||e[6]!==s?(i=J.jsx("div",{"data-slot":"input-otp-group",className:s,...a}),e[5]=a,e[6]=s,e[7]=i):i=e[7],i}function nt(t){const e=ne.c(17);let n,a,s;e[0]!==t?({index:a,className:n,...s}=t,e[0]=t,e[1]=n,e[2]=a,e[3]=s):(n=e[1],a=e[2],s=e[3]);const i=r.useContext(Ee);let f;e[4]!==a||e[5]!==i?.slots?(f=i?.slots[a]??{},e[4]=a,e[5]=i?.slots,e[6]=f):f=e[6];const{char:m,hasFakeCaret:y,isActive:w}=f;let h;e[7]!==n?(h=ee("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",n),e[7]=n,e[8]=h):h=e[8];let g;e[9]!==y?(g=y&&J.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:J.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})}),e[9]=y,e[10]=g):g=e[10];let p;return e[11]!==m||e[12]!==w||e[13]!==s||e[14]!==h||e[15]!==g?(p=J.jsxs("div",{"data-slot":"input-otp-slot","data-active":w,className:h,...s,children:[m,g]}),e[11]=m,e[12]=w,e[13]=s,e[14]=h,e[15]=g,e[16]=p):p=e[16],p}const rt=6,ce=async t=>{const e=await fetch(t,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Failed to fetch: ${e.status}`);return e.json()},at=()=>{const t=ne.c(14),[e,n]=r.useState(null),[a,s]=r.useState(null);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0];const[f,m]=r.useState(i);let y;t[1]===Symbol.for("react.memo_cache_sentinel")?(y=[],t[1]=y):y=t[1];const[w,h]=r.useState(y),g=e!==null&&a!==null;let p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=async()=>{try{const{svg:u}=await ce(Te.url());n(u)}catch{h(Qe),n(null)}},t[2]=p):p=t[2];const _=p;let b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=async()=>{try{const{secretKey:u}=await ce(De.url());s(u)}catch{h(Ve),s(null)}},t[3]=b):b=t[3];const x=b;let k;t[4]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{h([])},t[4]=k):k=t[4];const c=k;let R;t[5]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{s(null),n(null),c()},t[5]=R):R=t[5];const X=R;let A;t[6]===Symbol.for("react.memo_cache_sentinel")?(A=async()=>{try{c();const u=await ce(Oe.url());m(u)}catch{h(Je),m([])}},t[6]=A):A=t[6];const Z=A;let F;t[7]===Symbol.for("react.memo_cache_sentinel")?(F=async()=>{try{c(),await Promise.all([_(),x()])}catch{n(null),s(null)}},t[7]=F):F=t[7];const re=F;let H;return t[8]!==w||t[9]!==g||t[10]!==a||t[11]!==e||t[12]!==f?(H={qrCodeSvg:e,manualSetupKey:a,recoveryCodesList:f,hasSetupData:g,errors:w,clearErrors:c,clearSetupData:X,fetchQrCode:_,fetchSetupKey:x,fetchSetupData:re,fetchRecoveryCodes:Z},t[8]=w,t[9]=g,t[10]=a,t[11]=e,t[12]=f,t[13]=H):H=t[13],H};function Qe(t){return[...t,"Failed to fetch QR code"]}function Ve(t){return[...t,"Failed to fetch a setup key"]}function Je(t){return[...t,"Failed to fetch recovery codes"]}export{et as I,Ye as K,rt as O,tt as a,nt as b,at as u};
