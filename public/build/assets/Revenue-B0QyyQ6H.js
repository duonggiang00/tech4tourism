import{c as ue,r as oe,j as s,a as pe,H as be}from"./app-CQY01_Hl.js";import{f as ge,A as ye}from"./app-layout-BFesc2IZ.js";import{b as i,C as a,a as c,c as o}from"./card-D6ioF6Gn.js";import{B as Ne}from"./button-BluykqL-.js";import{I as de}from"./input-Cr4PK9yE.js";import{L as me}from"./label-EGOmbW92.js";import{T as ee,a as se,b as d,c as l,d as te,e as r}from"./table-D7kx_NJ9.js";import{B as _e}from"./badge-BSQev8u6.js";import{D as ve}from"./dollar-sign-DQRUF1v_.js";import{P as we}from"./package-SjbkP9ip.js";import{T as Se}from"./trending-up-8CKb3l99.js";import"./app-CEC-CZWY.js";import"./utils-D0Zg16Wk.js";import"./index-BZBSjhWP.js";import"./index-Cx_4zReh.js";import"./x-C5aSEyQM.js";import"./createLucideIcon-DRgLANJZ.js";import"./index-DK901XDU.js";import"./avatar-D1tWo-p_.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-Dr_4Q5D8.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./users-DZBot_VH.js";import"./file-text-BL_MquKf.js";import"./index-Du1opkJh.js";const De=[{title:"Báo cáo doanh thu",href:"/admin/reports/revenue"}];function as(R){const e=ue.c(67),{startDate:he,endDate:xe,totalRevenue:H,totalBookings:le,confirmedBookings:E,revenueByDay:I,revenueByTour:P,revenueByStatus:re,topBookings:V,totalDiscount:ne}=R,[h,je]=oe.useState(he),[x,fe]=oe.useState(xe),m=Be,ie=Te;let A;e[0]!==x||e[1]!==h?(A=t=>{t.preventDefault(),pe.get("/admin/reports/revenue",{start_date:h,end_date:x})},e[0]=x,e[1]=h,e[2]=A):A=e[2];const ae=A;let F;e[3]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(be,{title:"Báo cáo doanh thu"}),e[3]=F):F=e[3];let G;e[4]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:"Báo cáo doanh thu"})}),e[4]=G):G=e[4];let K;e[5]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(a,{children:s.jsx(c,{children:"Lọc theo thời gian"})}),e[5]=K):K=e[5];let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(me,{children:"Từ ngày"}),e[6]=M):M=e[6];let U;e[7]===Symbol.for("react.memo_cache_sentinel")?(U=t=>je(t.target.value),e[7]=U):U=e[7];let j;e[8]!==h?(j=s.jsxs("div",{className:"space-y-2 w-full md:w-auto",children:[M,s.jsx(de,{type:"date",value:h,onChange:U,className:"w-full"})]}),e[8]=h,e[9]=j):j=e[9];let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(me,{children:"Đến ngày"}),e[10]=$):$=e[10];let q;e[11]===Symbol.for("react.memo_cache_sentinel")?(q=t=>fe(t.target.value),e[11]=q):q=e[11];let f;e[12]!==x?(f=s.jsxs("div",{className:"space-y-2 w-full md:w-auto",children:[$,s.jsx(de,{type:"date",value:x,onChange:q,className:"w-full"})]}),e[12]=x,e[13]=f):f=e[13];let z;e[14]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("div",{className:"flex w-full md:w-auto",children:s.jsx(Ne,{type:"submit",className:"w-full md:w-auto",children:"Lọc"})}),e[14]=z):z=e[14];let u;e[15]!==ae||e[16]!==f||e[17]!==j?(u=s.jsxs(i,{className:"mb-6",children:[K,s.jsx(o,{children:s.jsxs("form",{onSubmit:ae,className:"flex flex-col gap-4 md:flex-row md:items-end",children:[j,f,z]})})]}),e[15]=ae,e[16]=f,e[17]=j,e[18]=u):u=e[18];let J;e[19]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Tổng doanh thu"}),s.jsx(ve,{className:"h-4 w-4 text-muted-foreground"})]}),e[19]=J):J=e[19];let p;e[20]!==H?(p=m(H),e[20]=H,e[21]=p):p=e[21];let b;e[22]!==p?(b=s.jsxs(i,{children:[J,s.jsx(o,{children:s.jsx("div",{className:"text-2xl font-bold",children:p})})]}),e[22]=p,e[23]=b):b=e[23];let O;e[24]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Tổng booking"}),s.jsx(we,{className:"h-4 w-4 text-muted-foreground"})]}),e[24]=O):O=e[24];let g;e[25]!==le?(g=s.jsx("div",{className:"text-2xl font-bold",children:le}),e[25]=le,e[26]=g):g=e[26];let y;e[27]!==E?(y=s.jsxs("p",{className:"text-xs text-muted-foreground",children:[E," đã xác nhận"]}),e[27]=E,e[28]=y):y=e[28];let N;e[29]!==g||e[30]!==y?(N=s.jsxs(i,{children:[O,s.jsxs(o,{children:[g,y]})]}),e[29]=g,e[30]=y,e[31]=N):N=e[31];let Q;e[32]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Tổng giảm giá"}),s.jsx(Se,{className:"h-4 w-4 text-muted-foreground"})]}),e[32]=Q):Q=e[32];let _;e[33]!==ne?(_=m(ne),e[33]=ne,e[34]=_):_=e[34];let v;e[35]!==_?(v=s.jsxs(i,{children:[Q,s.jsx(o,{children:s.jsx("div",{className:"text-2xl font-bold",children:_})})]}),e[35]=_,e[36]=v):v=e[36];let W;e[37]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Doanh thu trung bình"}),s.jsx(ge,{className:"h-4 w-4 text-muted-foreground"})]}),e[37]=W):W=e[37];const ce=E>0?H/E:0;let w;e[38]!==ce?(w=m(ce),e[38]=ce,e[39]=w):w=e[39];let S;e[40]!==w?(S=s.jsxs(i,{children:[W,s.jsx(o,{children:s.jsx("div",{className:"text-2xl font-bold",children:w})})]}),e[40]=w,e[41]=S):S=e[41];let D;e[42]!==b||e[43]!==N||e[44]!==v||e[45]!==S?(D=s.jsxs("div",{className:"grid gap-6 md:grid-cols-4 mb-6",children:[b,N,v,S]}),e[42]=b,e[43]=N,e[44]=v,e[45]=S,e[46]=D):D=e[46];let T;e[47]!==I?(T=I.length>0&&s.jsxs(i,{className:"mb-6",children:[s.jsx(a,{children:s.jsx(c,{children:"Doanh thu theo ngày"})}),s.jsx(o,{children:s.jsxs(ee,{children:[s.jsx(se,{children:s.jsxs(d,{children:[s.jsx(l,{children:"Ngày"}),s.jsx(l,{children:"Số booking"}),s.jsx(l,{children:"Doanh thu"})]})}),s.jsx(te,{children:I.map(t=>s.jsxs(d,{children:[s.jsx(r,{children:ie(t.date)}),s.jsx(r,{children:t.bookings_count}),s.jsx(r,{className:"font-medium",children:m(t.revenue)})]},t.date))})]})})]}),e[47]=I,e[48]=T):T=e[48];let B;e[49]!==P?(B=P.length>0&&s.jsxs(i,{className:"mb-6",children:[s.jsx(a,{children:s.jsx(c,{children:"Top 10 Tour có doanh thu cao nhất"})}),s.jsx(o,{children:s.jsxs(ee,{children:[s.jsx(se,{children:s.jsxs(d,{children:[s.jsx(l,{children:"Tour"}),s.jsx(l,{children:"Ngày khởi hành"}),s.jsx(l,{children:"Số booking"}),s.jsx(l,{children:"Doanh thu"})]})}),s.jsx(te,{children:P.map((t,n)=>s.jsxs(d,{children:[s.jsx(r,{className:"font-medium",children:t.tour_title}),s.jsx(r,{children:ie(t.date_start)}),s.jsx(r,{children:t.bookings_count}),s.jsx(r,{className:"font-medium",children:m(t.revenue)})]},n))})]})})]}),e[49]=P,e[50]=B):B=e[50];let X;e[51]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(a,{children:s.jsx(c,{children:"Doanh thu theo trạng thái"})}),e[51]=X):X=e[51];let Y;e[52]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(se,{children:s.jsxs(d,{children:[s.jsx(l,{children:"Trạng thái"}),s.jsx(l,{children:"Số lượng"}),s.jsx(l,{children:"Doanh thu"})]})}),e[52]=Y):Y=e[52];let C;if(e[53]!==re){let t;e[55]===Symbol.for("react.memo_cache_sentinel")?(t=n=>s.jsxs(d,{children:[s.jsx(r,{children:s.jsx(_e,{className:n.status===0?"bg-yellow-500":n.status===1?"bg-green-500":n.status===2?"bg-red-500":"bg-blue-500",children:n.label})}),s.jsx(r,{children:n.count}),s.jsx(r,{className:"font-medium",children:m(n.revenue)})]},n.status),e[55]=t):t=e[55],C=re.map(t),e[53]=re,e[54]=C}else C=e[54];let k;e[56]!==C?(k=s.jsxs(i,{className:"mb-6",children:[X,s.jsx(o,{children:s.jsxs(ee,{children:[Y,s.jsx(te,{children:C})]})})]}),e[56]=C,e[57]=k):k=e[57];let L;e[58]!==V?(L=V.length>0&&s.jsxs(i,{children:[s.jsx(a,{children:s.jsx(c,{children:"Top 10 Booking có giá trị cao nhất"})}),s.jsx(o,{children:s.jsxs(ee,{children:[s.jsx(se,{children:s.jsxs(d,{children:[s.jsx(l,{children:"Mã booking"}),s.jsx(l,{children:"Khách hàng"}),s.jsx(l,{children:"Tour"}),s.jsx(l,{children:"Giá trị"}),s.jsx(l,{children:"Ngày tạo"})]})}),s.jsx(te,{children:V.map(t=>s.jsxs(d,{children:[s.jsx(r,{className:"font-medium",children:t.code}),s.jsx(r,{children:t.client_name}),s.jsx(r,{children:t.tour_title}),s.jsx(r,{className:"font-medium",children:m(t.final_price)}),s.jsx(r,{children:ie(t.created_at)})]},t.code))})]})})]}),e[58]=V,e[59]=L):L=e[59];let Z;return e[60]!==u||e[61]!==D||e[62]!==T||e[63]!==B||e[64]!==k||e[65]!==L?(Z=s.jsxs(ye,{breadcrumbs:De,children:[F,s.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:s.jsxs("div",{className:"mx-auto max-w-7xl",children:[G,u,D,T,B,k,L]})})]}),e[60]=u,e[61]=D,e[62]=T,e[63]=B,e[64]=k,e[65]=L,e[66]=Z):Z=e[66],Z}function Te(R){return new Date(R).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"})}function Be(R){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(R)}export{as as default};
