import{c as Qe,r as Ee,u as Ue,j as t,L as Me,a as Ve,H as $e}from"./app-Bzh0QcV-.js";import{u as K,A as qe}from"./app-layout-CMbpVfDp.js";import{T as Ge,a as Je,b as Fe,c as F,d as We,e as R}from"./table-DiFZ2bUw.js";import{B as Ie}from"./badge-GiRAufZZ.js";import{B as c}from"./button-DLyenbHO.js";import{D as Ye,a as Ze,b as et,c as tt,d as lt}from"./dialog-60B12crD.js";import{S as st,a as it,b as rt,c as ge,d as at}from"./select-BE8zau-p.js";import{L as Re}from"./label-CaT48Pgd.js";import{S as nt}from"./switch-CnVNAfWZ.js";import{I as ct}from"./input-BI3Hn33c.js";import{A as Xe,a as Ke,b as Oe}from"./alert-DfdtR1IU.js";import{A as ot,a as mt,b as dt,c as ht,d as xt,e as ft,f as gt,g as jt}from"./alert-dialog-Dt1ptYmv.js";import{C as pt}from"./circle-check-Bf8bbdip.js";import{C as ut}from"./circle-x-BBKZBplY.js";import{P as bt}from"./plus-QDk8Rk0B.js";import{T as vt}from"./trash-2-BzQ-ycRS.js";import"./app-AjfTabGW.js";import"./utils-D0Zg16Wk.js";import"./index-Cs37kpNU.js";import"./index-DXbMLhRD.js";import"./x-Cc7sq3My.js";import"./createLucideIcon-Qg7y1Ni9.js";import"./index-3aTD3_kd.js";import"./avatar-DMx0EJxa.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-Cbb-6XH_.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./users-C6EN8SYz.js";import"./file-text-B2N7Qcbe.js";import"./index-rXl9eqvF.js";import"./index-BksToH6P.js";const ze={0:{label:"Khách hàng",color:"bg-gray-500"},1:{label:"Admin",color:"bg-red-500"},2:{label:"HDV",color:"bg-blue-500"},3:{label:"Sale",color:"bg-green-500"}},yt=[{title:"Quản lý người dùng",href:"/users"}];function nl(o){const e=Qe.c(112),{users:s,filters:O,flash:a}=o;let z;e[0]!==O?(z=O===void 0?{}:O,e[0]=O,e[1]=z):z=e[1];const Pe=z,[m,M]=Ee.useState(null),[n,je]=Ee.useState(null),[i,Be]=Ee.useState(Pe.search||"");let P;e[2]===Symbol.for("react.memo_cache_sentinel")?(P={role:0,is_active:!0},e[2]=P):P=e[2];const{data:X,setData:r,put:pe,processing:Q,reset:ue,errors:$}=Ue(P),{delete:be,processing:q}=Ue();let G;e[3]!==r?(G=l=>{M(l),r({role:l.role,is_active:l.is_active??!0})},e[3]=r,e[4]=G):G=e[4];const ve=G;let J;e[5]!==m||e[6]!==pe||e[7]!==ue?(J=l=>{l.preventDefault(),m&&pe(K.update(m.id).url,{onSuccess:()=>{M(null),ue()}})},e[5]=m,e[6]=pe,e[7]=ue,e[8]=J):J=e[8];const ye=J;let W;e[9]!==i?(W=l=>{l.preventDefault(),Ve.get(K.index().url,{search:i},{preserveState:!0,preserveScroll:!0})},e[9]=i,e[10]=W):W=e[10];const Se=W;let Y;e[11]!==n||e[12]!==be?(Y=()=>{n&&be(K.destroy(n.id).url,{onSuccess:()=>{je(null)}})},e[11]=n,e[12]=be,e[13]=Y):Y=e[13];const Ne=Y;let Z;e[14]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx($e,{title:"Quản lý người dùng"}),e[14]=Z):Z=e[14];let d;e[15]!==a?(d=a?.success&&t.jsxs(Xe,{variant:"default",className:"bg-green-50 border-green-200",children:[t.jsx(pt,{className:"h-4 w-4 text-green-600"}),t.jsx(Ke,{className:"text-green-800",children:"Thành công!"}),t.jsx(Oe,{className:"text-green-700",children:a.success})]}),e[15]=a,e[16]=d):d=e[16];let h;e[17]!==a?(h=a?.error&&t.jsxs(Xe,{variant:"destructive",children:[t.jsx(ut,{className:"h-4 w-4"}),t.jsx(Ke,{children:"Lỗi!"}),t.jsx(Oe,{children:a.error})]}),e[17]=a,e[18]=h):h=e[18];let ee;e[19]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("h2",{className:"text-2xl font-bold",children:"Danh sách người dùng"}),e[19]=ee):ee=e[19];let te;e[20]===Symbol.for("react.memo_cache_sentinel")?(te=K.create(),e[20]=te):te=e[20];let le;e[21]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ee,t.jsx(Me,{href:te.url,children:t.jsxs(c,{children:[t.jsx(bt,{className:"mr-2 h-4 w-4"}),"Tạo người dùng mới"]})})]}),e[21]=le):le=e[21];let se;e[22]===Symbol.for("react.memo_cache_sentinel")?(se=l=>Be(l.target.value),e[22]=se):se=e[22];let x;e[23]!==i?(x=t.jsx(ct,{type:"text",placeholder:"Tìm kiếm theo tên hoặc email...",value:i,onChange:se,className:"max-w-md"}),e[23]=i,e[24]=x):x=e[24];let ie;e[25]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(c,{type:"submit",children:"Tìm kiếm"}),e[25]=ie):ie=e[25];let f;e[26]!==i?(f=i&&t.jsx(c,{type:"button",variant:"outline",onClick:()=>{Be(""),Ve.get(K.index().url)},children:"Xóa"}),e[26]=i,e[27]=f):f=e[27];let g;e[28]!==x||e[29]!==f?(g=t.jsxs("div",{className:"flex gap-2",children:[x,ie,f]}),e[28]=x,e[29]=f,e[30]=g):g=e[30];let j;e[31]!==Se||e[32]!==g?(j=t.jsx("form",{onSubmit:Se,className:"mb-4",children:g}),e[31]=Se,e[32]=g,e[33]=j):j=e[33];let p;e[34]!==ve||e[35]!==s.data||e[36]!==s.from||e[37]!==s.links||e[38]!==s.to||e[39]!==s.total?(p=s.data&&s.data.length>0?t.jsxs(t.Fragment,{children:[t.jsxs(Ge,{children:[t.jsx(Je,{children:t.jsxs(Fe,{children:[t.jsx(F,{children:"ID"}),t.jsx(F,{children:"Tên"}),t.jsx(F,{children:"Email"}),t.jsx(F,{children:"Vai trò"}),t.jsx(F,{children:"Trạng thái"}),t.jsx(F,{className:"text-right",children:"Hành động"})]})}),t.jsx(We,{children:s.data.map(l=>t.jsxs(Fe,{children:[t.jsx(R,{className:"font-medium",children:l.id}),t.jsx(R,{className:"font-medium",children:t.jsxs("div",{className:"flex items-center gap-2",children:[l.avatar&&t.jsx("img",{src:l.avatar,alt:l.name,className:"w-8 h-8 rounded-full"}),t.jsx("span",{children:l.name})]})}),t.jsx(R,{children:l.email}),t.jsx(R,{children:t.jsx(Ie,{className:ze[l.role]?.color||"bg-gray-500",children:ze[l.role]?.label||"Unknown"})}),t.jsx(R,{children:l.is_active?t.jsx(Ie,{variant:"outline",className:"text-green-600 border-green-600",children:"Hoạt động"}):t.jsx(Ie,{variant:"destructive",children:"Đã khóa"})}),t.jsx(R,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(c,{variant:"outline",size:"sm",onClick:()=>ve(l),children:"Cập nhật"}),t.jsx(c,{variant:"destructive",size:"sm",onClick:()=>je(l),children:t.jsx(vt,{className:"h-4 w-4"})})]})})]},l.id))})]}),s.links&&s.links.length>3&&t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-700",children:["Hiển thị ",s.from||0," đến ",s.to||0," trong tổng số ",s.total||0," người dùng"]}),t.jsx("div",{className:"flex gap-2",children:s.links.map(St)})]})]}):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"Không tìm thấy người dùng nào."}),e[34]=ve,e[35]=s.data,e[36]=s.from,e[37]=s.links,e[38]=s.to,e[39]=s.total,e[40]=p):p=e[40];let u;e[41]!==j||e[42]!==p?(u=t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[le,j,p]}),e[41]=j,e[42]=p,e[43]=u):u=e[43];let b;e[44]!==h||e[45]!==u||e[46]!==d?(b=t.jsxs("div",{className:"p-6 space-y-4",children:[d,h,u]}),e[44]=h,e[45]=u,e[46]=d,e[47]=b):b=e[47];const _e=!!m;let re;e[48]===Symbol.for("react.memo_cache_sentinel")?(re=l=>!l&&M(null),e[48]=re):re=e[48];const Ce=m?.name;let v;e[49]!==Ce?(v=t.jsx(Ye,{children:t.jsxs(Ze,{children:["Cập nhật: ",Ce]})}),e[49]=Ce,e[50]=v):v=e[50];let ae;e[51]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Re,{children:"Vai trò hệ thống"}),e[51]=ae):ae=e[51];const De=String(X.role);let y;e[52]!==r?(y=l=>r("role",parseInt(l)),e[52]=r,e[53]=y):y=e[53];let ne;e[54]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(st,{children:t.jsx(it,{placeholder:"Chọn vai trò"})}),e[54]=ne):ne=e[54];let ce;e[55]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsxs(rt,{children:[t.jsx(ge,{value:"0",children:"Khách hàng"}),t.jsx(ge,{value:"1",children:"Admin"}),t.jsx(ge,{value:"2",children:"Hướng dẫn viên"}),t.jsx(ge,{value:"3",children:"Nhân viên Sale"})]}),e[55]=ce):ce=e[55];let S;e[56]!==De||e[57]!==y?(S=t.jsxs(at,{value:De,onValueChange:y,children:[ne,ce]}),e[56]=De,e[57]=y,e[58]=S):S=e[58];let N;e[59]!==$.role?(N=$.role&&t.jsx("div",{className:"text-red-500 text-sm",children:$.role}),e[59]=$.role,e[60]=N):N=e[60];let _;e[61]!==S||e[62]!==N?(_=t.jsxs("div",{className:"space-y-2",children:[ae,S,N]}),e[61]=S,e[62]=N,e[63]=_):_=e[63];let oe;e[64]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Re,{children:"Trạng thái hoạt động"}),e[64]=oe):oe=e[64];const Te=X.is_active?"Người dùng được phép đăng nhập":"Chặn truy cập hệ thống";let C;e[65]!==Te?(C=t.jsxs("div",{className:"space-y-0.5",children:[oe,t.jsx("div",{className:"text-sm text-gray-500",children:Te})]}),e[65]=Te,e[66]=C):C=e[66];let D;e[67]!==r?(D=l=>r("is_active",l),e[67]=r,e[68]=D):D=e[68];let T;e[69]!==X.is_active||e[70]!==D?(T=t.jsx(nt,{checked:X.is_active,onCheckedChange:D}),e[69]=X.is_active,e[70]=D,e[71]=T):T=e[71];let A;e[72]!==C||e[73]!==T?(A=t.jsxs("div",{className:"flex items-center justify-between border p-3 rounded",children:[C,T]}),e[72]=C,e[73]=T,e[74]=A):A=e[74];let me;e[75]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(c,{type:"button",variant:"ghost",onClick:()=>M(null),children:"Hủy"}),e[75]=me):me=e[75];const Ae=Q?"Đang lưu...":"Lưu thay đổi";let w;e[76]!==Q||e[77]!==Ae?(w=t.jsxs(et,{children:[me,t.jsx(c,{type:"submit",disabled:Q,children:Ae})]}),e[76]=Q,e[77]=Ae,e[78]=w):w=e[78];let k;e[79]!==ye||e[80]!==_||e[81]!==A||e[82]!==w?(k=t.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[_,A,w]}),e[79]=ye,e[80]=_,e[81]=A,e[82]=w,e[83]=k):k=e[83];let H;e[84]!==v||e[85]!==k?(H=t.jsxs(tt,{children:[v,k]}),e[84]=v,e[85]=k,e[86]=H):H=e[86];let L;e[87]!==_e||e[88]!==H?(L=t.jsx(lt,{open:_e,onOpenChange:re,children:H}),e[87]=_e,e[88]=H,e[89]=L):L=e[89];const we=!!n;let de;e[90]===Symbol.for("react.memo_cache_sentinel")?(de=l=>!l&&je(null),e[90]=de):de=e[90];let he;e[91]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ot,{children:"Xác nhận xóa người dùng"}),e[91]=he):he=e[91];const ke=n?.name;let E;e[92]!==ke?(E=t.jsx("strong",{children:ke}),e[92]=ke,e[93]=E):E=e[93];const He=n?.email;let I;e[94]!==E||e[95]!==He?(I=t.jsxs(mt,{children:[he,t.jsxs(dt,{children:["Bạn có chắc chắn muốn xóa người dùng ",E," (",He,")? Hành động này không thể hoàn tác."]})]}),e[94]=E,e[95]=He,e[96]=I):I=e[96];let xe;e[97]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(ht,{children:"Hủy"}),e[97]=xe):xe=e[97];const Le=q?"Đang xóa...":"Xóa";let B;e[98]!==q||e[99]!==Ne||e[100]!==Le?(B=t.jsxs(xt,{children:[xe,t.jsx(ft,{onClick:Ne,disabled:q,className:"bg-red-600 hover:bg-red-700",children:Le})]}),e[98]=q,e[99]=Ne,e[100]=Le,e[101]=B):B=e[101];let U;e[102]!==I||e[103]!==B?(U=t.jsxs(gt,{children:[I,B]}),e[102]=I,e[103]=B,e[104]=U):U=e[104];let V;e[105]!==we||e[106]!==U?(V=t.jsx(jt,{open:we,onOpenChange:de,children:U}),e[105]=we,e[106]=U,e[107]=V):V=e[107];let fe;return e[108]!==b||e[109]!==L||e[110]!==V?(fe=t.jsxs(qe,{breadcrumbs:yt,children:[Z,b,L,V]}),e[108]=b,e[109]=L,e[110]=V,e[111]=fe):fe=e[111],fe}function St(o,e){return t.jsx(Me,{href:o.url||"#",className:`px-3 py-2 rounded-md text-sm font-medium ${o.active?"bg-blue-600 text-white":o.url?"bg-white text-gray-700 hover:bg-gray-50 border":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:o.label}},e)}export{nl as default};
