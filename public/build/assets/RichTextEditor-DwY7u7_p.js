import{r as b,c as V,j as q,d as z}from"./app-CaSGj1uT.js";var S={exports:{}},_,L;function W(){if(L)return _;L=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _=r,_}var E,P;function G(){if(P)return E;P=1;var r=W();function t(){}function i(){}return i.resetWarningCache=t,E=function(){function o(e,u,c,f,d,l){if(l!==r){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}o.isRequired=o;function a(){return o}var s={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:a,element:o,elementType:o,instanceOf:a,node:o,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:i,resetWarningCache:t};return s.PropTypes=s,s},E}var D;function $(){return D||(D=1,S.exports=G()()),S.exports}var n=$(),w=function(){return w=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},w.apply(this,arguments)},F={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},J=w({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,readonly:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},F),U=function(r){var t=r;return t&&t.tinymce?t.tinymce:null},k=function(r){return typeof r=="function"},x=function(r){return r in F},j=function(r){return r.substr(2)},Y=function(r,t,i,o,a,s,e){var u=Object.keys(a).filter(x),c=Object.keys(s).filter(x),f=u.filter(function(l){return s[l]===void 0}),d=c.filter(function(l){return a[l]===void 0});f.forEach(function(l){var p=j(l),v=e[p];i(p,v),delete e[p]}),d.forEach(function(l){var p=o(r,l),v=j(l);e[v]=p,t(v,p)})},Q=function(r,t,i,o,a){return Y(a,r.on.bind(r),r.off.bind(r),function(s,e){return function(u){var c;return(c=s(e))===null||c===void 0?void 0:c(u,r)}},t,i,o)},B=0,K=function(r){var t=Date.now(),i=Math.floor(Math.random()*1e9);return B++,r+"_"+i+B+String(t)},N=function(r){return r!==null&&(r.tagName.toLowerCase()==="textarea"||r.tagName.toLowerCase()==="input")},M=function(r){return typeof r>"u"||r===""?[]:Array.isArray(r)?r:r.split(" ")},X=function(r,t){return M(r).concat(M(t))},Z=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},ee=function(r){if(!("isConnected"in Node.prototype)){for(var t=r,i=r.parentNode;i!=null;)t=i,i=t.parentNode;return t===r.ownerDocument}return r.isConnected},A=function(r,t){r!==void 0&&(r.mode!=null&&typeof r.mode=="object"&&typeof r.mode.set=="function"?r.mode.set(t):r.setMode(t))},ne=function(r){var t=U(r);if(!t)throw new Error("tinymce should have been loaded into global scope");return t},H=function(r){return r.options&&r.options.isRegistered("disabled")},O=function(){return O=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},O.apply(this,arguments)},te=function(r,t,i){var o,a,s=r.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=t.id,s.src=t.src,s.async=(o=t.async)!==null&&o!==void 0?o:!1,s.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var e=function(){s.removeEventListener("load",e),s.removeEventListener("error",u),i(t.src)},u=function(c){s.removeEventListener("load",e),s.removeEventListener("error",u),i(t.src,c)};s.addEventListener("load",e),s.addEventListener("error",u),r.head&&r.head.appendChild(s)},re=function(r){var t={},i=function(e,u){var c=t[e];c.done=!0,c.error=u;for(var f=0,d=c.handlers;f<d.length;f++){var l=d[f];l(e,u)}c.handlers=[]},o=function(e,u,c){var f=function(C){return c!==void 0?c(C):console.error(C)};if(e.length===0){f(new Error("At least one script must be provided"));return}for(var d=0,l=!1,p=function(C,R){l||(R?(l=!0,f(R)):++d===e.length&&u())},v=0,h=e;v<h.length;v++){var y=h[v],g=t[y.src];if(g)g.done?p(y.src,g.error):g.handlers.push(p);else{var I=K("tiny-");t[y.src]={id:I,src:y.src,done:!1,error:null,handlers:[p]},te(r,O({id:I},y),i)}}},a=function(){for(var e,u=0,c=Object.values(t);u<c.length;u++){var f=c[u],d=r.getElementById(f.id);d!=null&&d.tagName==="SCRIPT"&&((e=d.parentNode)===null||e===void 0||e.removeChild(d))}t={}},s=function(){return r};return{loadScripts:o,deleteScripts:a,getDocument:s}},oe=function(){var r=[],t=function(a){var s=r.find(function(e){return e.getDocument()===a});return s===void 0&&(s=re(a),r.push(s)),s},i=function(a,s,e,u,c){var f=function(){return t(a).loadScripts(s,u,c)};e>0?setTimeout(f,e):f()},o=function(){for(var a=r.pop();a!=null;a=r.pop())a.deleteScripts()};return{loadList:i,reinitialize:o}},ie=oe(),ae=(function(){var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])},r(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(t,i);function o(){this.constructor=t}t.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),m=function(){return m=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},m.apply(this,arguments)},T="change keyup compositionend setcontent CommentChange",se=(function(r){ae(t,r);function t(i){var o,a,s,e=r.call(this,i)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var u=e.editor,c=e.props.value;u&&c&&c!==e.currentContent&&u.undoManager.ignore(function(){if(u.setContent(c),e.valueCursor&&(!e.inline||u.hasFocus()))try{u.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(u){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&e.handleBeforeInput(u)},e.handleEditorChange=function(u){var c=e.editor;if(c&&c.initialized){var f=c.getContent();e.props.value!==void 0&&e.props.value!==f&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),f!==e.currentContent&&(e.currentContent=f,k(e.props.onEditorChange)&&e.props.onEditorChange(f,c))}},e.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&e.handleEditorChange(u)},e.initialise=function(u){var c,f,d;u===void 0&&(u=0);var l=e.elementRef.current;if(l){if(!ee(l)){if(u===0)setTimeout(function(){return e.initialise(1)},1);else if(u<100)setTimeout(function(){return e.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var p=ne(e.view),v=m(m(m(m({},e.props.init),{selector:void 0,target:l,disabled:e.props.disabled,readonly:e.props.readonly,inline:e.inline,plugins:X((c=e.props.init)===null||c===void 0?void 0:c.plugins,e.props.plugins),toolbar:(f=e.props.toolbar)!==null&&f!==void 0?f:(d=e.props.init)===null||d===void 0?void 0:d.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(h){e.editor=h,e.bindHandlers({}),e.inline&&!N(l)&&h.once("PostRender",function(y){h.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&k(e.props.init.setup)&&e.props.init.setup(h),e.props.disabled&&(H(e.editor)?e.editor.options.set("disabled",e.props.disabled):e.editor.mode.set("readonly"))},init_instance_callback:function(h){var y,g=e.getInitialValue();e.currentContent=(y=e.currentContent)!==null&&y!==void 0?y:h.getContent(),e.currentContent!==g&&(e.currentContent=g,h.setContent(g),h.undoManager.clear(),h.undoManager.add(),h.setDirty(!1)),e.props.init&&k(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(h)}});e.inline||(l.style.visibility=""),N(l)&&(l.value=e.getInitialValue()),p.init(v)}},e.id=e.props.id||K("tiny-react"),e.elementRef=b.createRef(),e.inline=(s=(o=e.props.inline)!==null&&o!==void 0?o:(a=e.props.init)===null||a===void 0?void 0:a.inline)!==null&&s!==void 0?s:!1,e.boundHandlers={},e}return Object.defineProperty(t.prototype,"view",{get:function(){var i,o;return(o=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(i){var o=this,a,s;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var c;if(!o.inline||e.hasFocus())try{c=e.selection.getBookmark(3)}catch{}var f=o.valueCursor;if(e.setContent(o.props.value),!o.inline||e.hasFocus())for(var d=0,l=[c,f];d<l.length;d++){var p=l[d];if(p)try{e.selection.moveToBookmark(p),o.valueCursor=p;break}catch{}}})}if(this.props.readonly!==i.readonly){var u=(s=this.props.readonly)!==null&&s!==void 0?s:!1;A(this.editor,u?"readonly":"design")}this.props.disabled!==i.disabled&&(H(this.editor)?this.editor.options.set("disabled",this.props.disabled):A(this.editor,this.props.disabled?"readonly":"design"))}},t.prototype.componentDidMount=function(){var i=this,o,a,s,e,u;if(U(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(o=this.props).onScriptsLoadError)===null||a===void 0||a.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((s=this.elementRef.current)===null||s===void 0)&&s.ownerDocument){var c=function(){var d,l;(l=(d=i.props).onScriptsLoad)===null||l===void 0||l.call(d),i.initialise()},f=function(d){var l,p;(p=(l=i.props).onScriptsLoadError)===null||p===void 0||p.call(l,d)};ie.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&u!==void 0?u:0,c,f)}},t.prototype.componentWillUnmount=function(){var i=this,o=this.editor;o&&(o.off(T,this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){o.off(a,i.boundHandlers[a])}),this.boundHandlers={},o.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return Z()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var i=this.props.tagName,o=i===void 0?"div":i;return b.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return b.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var i,o,a=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,s=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:s}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:a,defer:s}:f});var e=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",c="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:c,async:a,defer:s}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(i){var o=this;if(this.editor!==void 0){Q(this.editor,i,this.props,this.boundHandlers,function(u){return o.props[u]});var a=function(u){return u.onEditorChange!==void 0||u.value!==void 0},s=a(i),e=a(this.props);!s&&e?(this.editor.on(T,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):s&&!e&&(this.editor.off(T,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=J,t.defaultProps={cloudChannel:"8"},t})(b.Component);function le(r){const t=V.c(11),{value:i,onChange:o,placeholder:a,height:s}=r,e=s===void 0?300:s,u=b.useRef(null);let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=(v,h)=>u.current=h,t[0]=c):c=t[0];let f;t[1]!==o?(f=v=>o(v),t[1]=o,t[2]=f):f=t[2];let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],t[3]=d):d=t[3];let l;t[4]!==e||t[5]!==a?(l={license_key:"gpl",height:e,menubar:!1,plugins:d,toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | image | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",placeholder:a,images_upload_handler:ue},t[4]=e,t[5]=a,t[6]=l):l=t[6];let p;return t[7]!==f||t[8]!==l||t[9]!==i?(p=q.jsx(se,{tinymceScriptSrc:"/build/tinymce/tinymce.min.js",onInit:c,value:i,onEditorChange:f,init:l}),t[7]=f,t[8]=l,t[9]=i,t[10]=p):p=t[10],p}function ue(r,t){return new Promise((i,o)=>{const a=new FormData;a.append("file",r.blob(),r.filename()),z.post("/upload-image",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:s=>{s.total&&t(s.loaded/s.total*100)}}).then(s=>{s.data.location?i(s.data.location):o("Upload failed: No location returned")}).catch(s=>{const e=s.response?.data?.message||s.message||"Upload failed";o(e)})})}export{le as R};
