import{c as $e,r as Ue,u as Ve,j as s,L as Pe,a as ze,H as qe}from"./app-CQY01_Hl.js";import{u as X,A as Ge}from"./app-layout-BFesc2IZ.js";import{T as Je,a as We,b as Fe,c as z,d as Ye,e as F}from"./table-D7kx_NJ9.js";import{B as pe}from"./badge-BSQev8u6.js";import{B as r}from"./button-BluykqL-.js";import{D as Ze,a as es,b as ss,c as ts,d as ls}from"./dialog-BkFPLtOE.js";import{S as as,a as is,b as rs,c as ue,d as ns}from"./select-BC9YTAFF.js";import{L as Re}from"./label-EGOmbW92.js";import{S as cs}from"./switch-XrahSXV1.js";import{I as os}from"./input-Cr4PK9yE.js";import{A as Xe,a as Ke,b as Oe}from"./alert-DEJWH2tE.js";import{A as ms,a as ds,b as hs,c as xs,d as gs,e as fs,f as js,g as ps}from"./alert-dialog-Bm6Eqs_0.js";import{C as us}from"./circle-check-CQLE1h-w.js";import{C as bs}from"./circle-x-BFtqM6FQ.js";import{P as vs}from"./plus-CdtyGC9V.js";import{T as Me}from"./trash-2-Bwip0iwY.js";import"./app-CEC-CZWY.js";import"./utils-D0Zg16Wk.js";import"./index-BZBSjhWP.js";import"./index-Cx_4zReh.js";import"./x-C5aSEyQM.js";import"./createLucideIcon-DRgLANJZ.js";import"./index-DK901XDU.js";import"./avatar-D1tWo-p_.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-Dr_4Q5D8.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-2FGh3n-F.js";import"./index-CGelz8kl.js";import"./users-DZBot_VH.js";import"./file-text-BL_MquKf.js";import"./index-Du1opkJh.js";import"./index-B4_eF53t.js";const be={0:{label:"Khách hàng",color:"bg-gray-500"},1:{label:"Admin",color:"bg-red-500"},2:{label:"HDV",color:"bg-blue-500"},3:{label:"Sale",color:"bg-green-500"}},Ns=[{title:"Quản lý người dùng",href:"/users"}];function nt(o){const e=$e.c(112),{users:l,filters:K,flash:n}=o;let O;e[0]!==K?(O=K===void 0?{}:K,e[0]=K,e[1]=O):O=e[1];const Qe=O,[m,M]=Ue.useState(null),[c,P]=Ue.useState(null),[a,Be]=Ue.useState(Qe.search||"");let Q;e[2]===Symbol.for("react.memo_cache_sentinel")?(Q={role:0,is_active:!0},e[2]=Q):Q=e[2];const{data:R,setData:i,put:ve,processing:$,reset:Ne,errors:q}=Ve(Q),{delete:ye,processing:G}=Ve();let J;e[3]!==i?(J=t=>{M(t),i({role:t.role,is_active:t.is_active??!0})},e[3]=i,e[4]=J):J=e[4];const W=J;let Y;e[5]!==m||e[6]!==ve||e[7]!==Ne?(Y=t=>{t.preventDefault(),m&&ve(X.update(m.id).url,{onSuccess:()=>{M(null),Ne()}})},e[5]=m,e[6]=ve,e[7]=Ne,e[8]=Y):Y=e[8];const Se=Y;let Z;e[9]!==a?(Z=t=>{t.preventDefault(),ze.get(X.index().url,{search:a},{preserveState:!0,preserveScroll:!0})},e[9]=a,e[10]=Z):Z=e[10];const we=Z;let ee;e[11]!==c||e[12]!==ye?(ee=()=>{c&&ye(X.destroy(c.id).url,{onSuccess:()=>{P(null)}})},e[11]=c,e[12]=ye,e[13]=ee):ee=e[13];const Ce=ee;let se;e[14]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(qe,{title:"Quản lý người dùng"}),e[14]=se):se=e[14];let d;e[15]!==n?(d=n?.success&&s.jsxs(Xe,{variant:"default",className:"bg-green-50 border-green-200",children:[s.jsx(us,{className:"h-4 w-4 text-green-600"}),s.jsx(Ke,{className:"text-green-800",children:"Thành công!"}),s.jsx(Oe,{className:"text-green-700",children:n.success})]}),e[15]=n,e[16]=d):d=e[16];let h;e[17]!==n?(h=n?.error&&s.jsxs(Xe,{variant:"destructive",children:[s.jsx(bs,{className:"h-4 w-4"}),s.jsx(Ke,{children:"Lỗi!"}),s.jsx(Oe,{children:n.error})]}),e[17]=n,e[18]=h):h=e[18];let te;e[19]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("h2",{className:"text-2xl font-bold",children:"Danh sách người dùng"}),e[19]=te):te=e[19];let le;e[20]===Symbol.for("react.memo_cache_sentinel")?(le=X.create(),e[20]=le):le=e[20];let ae;e[21]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[te,s.jsx(Pe,{href:le.url,children:s.jsxs(r,{children:[s.jsx(vs,{className:"mr-2 h-4 w-4"}),"Tạo người dùng mới"]})})]}),e[21]=ae):ae=e[21];let ie;e[22]===Symbol.for("react.memo_cache_sentinel")?(ie=t=>Be(t.target.value),e[22]=ie):ie=e[22];let x;e[23]!==a?(x=s.jsx(os,{type:"text",placeholder:"Tìm kiếm theo tên hoặc email...",value:a,onChange:ie,className:"max-w-md"}),e[23]=a,e[24]=x):x=e[24];let re;e[25]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(r,{type:"submit",children:"Tìm kiếm"}),e[25]=re):re=e[25];let g;e[26]!==a?(g=a&&s.jsx(r,{type:"button",variant:"outline",onClick:()=>{Be(""),ze.get(X.index().url)},children:"Xóa"}),e[26]=a,e[27]=g):g=e[27];let f;e[28]!==x||e[29]!==g?(f=s.jsxs("div",{className:"flex gap-2",children:[x,re,g]}),e[28]=x,e[29]=g,e[30]=f):f=e[30];let j;e[31]!==we||e[32]!==f?(j=s.jsx("form",{onSubmit:we,className:"mb-4",children:f}),e[31]=we,e[32]=f,e[33]=j):j=e[33];let p;e[34]!==W||e[35]!==l.data||e[36]!==l.from||e[37]!==l.links||e[38]!==l.to||e[39]!==l.total?(p=l.data&&l.data.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:hidden",children:l.data.map(t=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border shadow-sm space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[t.avatar?s.jsx("img",{src:t.avatar,alt:t.name,className:"w-10 h-10 rounded-full object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]}),s.jsx(pe,{className:be[t.role]?.color||"bg-gray-500",children:be[t.role]?.label||"Unknown"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block",children:"Email:"}),s.jsx("span",{className:"font-medium text-gray-900 break-all",children:t.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block",children:"Trạng thái:"}),t.is_active?s.jsx("span",{className:"text-green-600 font-medium",children:"Hoạt động"}):s.jsx("span",{className:"text-red-600 font-medium",children:"Đã khóa"})]})]}),s.jsxs("div",{className:"pt-3 border-t flex justify-end gap-2",children:[s.jsx(r,{variant:"outline",size:"sm",onClick:()=>W(t),className:"flex-1",children:"Cập nhật"}),s.jsx(r,{variant:"destructive",size:"sm",onClick:()=>P(t),className:"w-10 px-0",children:s.jsx(Me,{className:"h-4 w-4"})})]})]},t.id))}),s.jsx("div",{className:"hidden sm:block overflow-x-auto",children:s.jsxs(Je,{className:"min-w-full",children:[s.jsx(We,{children:s.jsxs(Fe,{children:[s.jsx(z,{className:"whitespace-nowrap",children:"ID"}),s.jsx(z,{className:"whitespace-nowrap",children:"Tên"}),s.jsx(z,{className:"whitespace-nowrap",children:"Email"}),s.jsx(z,{className:"whitespace-nowrap",children:"Vai trò"}),s.jsx(z,{className:"whitespace-nowrap",children:"Trạng thái"}),s.jsx(z,{className:"text-right whitespace-nowrap",children:"Hành động"})]})}),s.jsx(Ye,{children:l.data.map(t=>s.jsxs(Fe,{children:[s.jsx(F,{className:"font-medium",children:t.id}),s.jsx(F,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.avatar&&s.jsx("img",{src:t.avatar,alt:t.name,className:"w-8 h-8 rounded-full"}),s.jsx("span",{children:t.name})]})}),s.jsx(F,{children:t.email}),s.jsx(F,{children:s.jsx(pe,{className:be[t.role]?.color||"bg-gray-500",children:be[t.role]?.label||"Unknown"})}),s.jsx(F,{children:t.is_active?s.jsx(pe,{variant:"outline",className:"text-green-600 border-green-600",children:"Hoạt động"}):s.jsx(pe,{variant:"destructive",children:"Đã khóa"})}),s.jsx(F,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(r,{variant:"outline",size:"sm",onClick:()=>W(t),children:"Cập nhật"}),s.jsx(r,{variant:"destructive",size:"sm",onClick:()=>P(t),children:s.jsx(Me,{className:"h-4 w-4"})})]})})]},t.id))})]})}),l.links&&l.links.length>3&&s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Hiển thị ",l.from||0," đến ",l.to||0," trong tổng số ",l.total||0," người dùng"]}),s.jsx("div",{className:"flex gap-2",children:l.links.map(ys)})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Không tìm thấy người dùng nào."}),e[34]=W,e[35]=l.data,e[36]=l.from,e[37]=l.links,e[38]=l.to,e[39]=l.total,e[40]=p):p=e[40];let u;e[41]!==j||e[42]!==p?(u=s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[ae,j,p]}),e[41]=j,e[42]=p,e[43]=u):u=e[43];let b;e[44]!==h||e[45]!==u||e[46]!==d?(b=s.jsxs("div",{className:"p-6 space-y-4",children:[d,h,u]}),e[44]=h,e[45]=u,e[46]=d,e[47]=b):b=e[47];const De=!!m;let ne;e[48]===Symbol.for("react.memo_cache_sentinel")?(ne=t=>!t&&M(null),e[48]=ne):ne=e[48];const ke=m?.name;let v;e[49]!==ke?(v=s.jsx(Ze,{children:s.jsxs(es,{children:["Cập nhật: ",ke]})}),e[49]=ke,e[50]=v):v=e[50];let ce;e[51]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(Re,{children:"Vai trò hệ thống"}),e[51]=ce):ce=e[51];const _e=String(R.role);let N;e[52]!==i?(N=t=>i("role",parseInt(t)),e[52]=i,e[53]=N):N=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(as,{children:s.jsx(is,{placeholder:"Chọn vai trò"})}),e[54]=oe):oe=e[54];let me;e[55]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsxs(rs,{children:[s.jsx(ue,{value:"0",children:"Khách hàng"}),s.jsx(ue,{value:"1",children:"Admin"}),s.jsx(ue,{value:"2",children:"Hướng dẫn viên"}),s.jsx(ue,{value:"3",children:"Nhân viên Sale"})]}),e[55]=me):me=e[55];let y;e[56]!==_e||e[57]!==N?(y=s.jsxs(ns,{value:_e,onValueChange:N,children:[oe,me]}),e[56]=_e,e[57]=N,e[58]=y):y=e[58];let S;e[59]!==q.role?(S=q.role&&s.jsx("div",{className:"text-red-500 text-sm",children:q.role}),e[59]=q.role,e[60]=S):S=e[60];let w;e[61]!==y||e[62]!==S?(w=s.jsxs("div",{className:"space-y-2",children:[ce,y,S]}),e[61]=y,e[62]=S,e[63]=w):w=e[63];let de;e[64]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Re,{children:"Trạng thái hoạt động"}),e[64]=de):de=e[64];const Te=R.is_active?"Người dùng được phép đăng nhập":"Chặn truy cập hệ thống";let C;e[65]!==Te?(C=s.jsxs("div",{className:"space-y-0.5",children:[de,s.jsx("div",{className:"text-sm text-gray-500",children:Te})]}),e[65]=Te,e[66]=C):C=e[66];let D;e[67]!==i?(D=t=>i("is_active",t),e[67]=i,e[68]=D):D=e[68];let k;e[69]!==R.is_active||e[70]!==D?(k=s.jsx(cs,{checked:R.is_active,onCheckedChange:D}),e[69]=R.is_active,e[70]=D,e[71]=k):k=e[71];let _;e[72]!==C||e[73]!==k?(_=s.jsxs("div",{className:"flex items-center justify-between border p-3 rounded",children:[C,k]}),e[72]=C,e[73]=k,e[74]=_):_=e[74];let he;e[75]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(r,{type:"button",variant:"ghost",onClick:()=>M(null),children:"Hủy"}),e[75]=he):he=e[75];const Ae=$?"Đang lưu...":"Lưu thay đổi";let T;e[76]!==$||e[77]!==Ae?(T=s.jsxs(ss,{children:[he,s.jsx(r,{type:"submit",disabled:$,children:Ae})]}),e[76]=$,e[77]=Ae,e[78]=T):T=e[78];let A;e[79]!==Se||e[80]!==w||e[81]!==_||e[82]!==T?(A=s.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[w,_,T]}),e[79]=Se,e[80]=w,e[81]=_,e[82]=T,e[83]=A):A=e[83];let H;e[84]!==v||e[85]!==A?(H=s.jsxs(ts,{children:[v,A]}),e[84]=v,e[85]=A,e[86]=H):H=e[86];let L;e[87]!==De||e[88]!==H?(L=s.jsx(ls,{open:De,onOpenChange:ne,children:H}),e[87]=De,e[88]=H,e[89]=L):L=e[89];const He=!!c;let xe;e[90]===Symbol.for("react.memo_cache_sentinel")?(xe=t=>!t&&P(null),e[90]=xe):xe=e[90];let ge;e[91]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(ms,{children:"Xác nhận xóa người dùng"}),e[91]=ge):ge=e[91];const Le=c?.name;let E;e[92]!==Le?(E=s.jsx("strong",{children:Le}),e[92]=Le,e[93]=E):E=e[93];const Ee=c?.email;let I;e[94]!==E||e[95]!==Ee?(I=s.jsxs(ds,{children:[ge,s.jsxs(hs,{children:["Bạn có chắc chắn muốn xóa người dùng ",E," (",Ee,")? Hành động này không thể hoàn tác."]})]}),e[94]=E,e[95]=Ee,e[96]=I):I=e[96];let fe;e[97]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(xs,{children:"Hủy"}),e[97]=fe):fe=e[97];const Ie=G?"Đang xóa...":"Xóa";let U;e[98]!==G||e[99]!==Ce||e[100]!==Ie?(U=s.jsxs(gs,{children:[fe,s.jsx(fs,{onClick:Ce,disabled:G,className:"bg-red-600 hover:bg-red-700",children:Ie})]}),e[98]=G,e[99]=Ce,e[100]=Ie,e[101]=U):U=e[101];let B;e[102]!==I||e[103]!==U?(B=s.jsxs(js,{children:[I,U]}),e[102]=I,e[103]=U,e[104]=B):B=e[104];let V;e[105]!==He||e[106]!==B?(V=s.jsx(ps,{open:He,onOpenChange:xe,children:B}),e[105]=He,e[106]=B,e[107]=V):V=e[107];let je;return e[108]!==b||e[109]!==L||e[110]!==V?(je=s.jsxs(Ge,{breadcrumbs:Ns,children:[se,b,L,V]}),e[108]=b,e[109]=L,e[110]=V,e[111]=je):je=e[111],je}function ys(o,e){return s.jsx(Pe,{href:o.url||"#",className:`px-3 py-2 rounded-md text-sm font-medium ${o.active?"bg-blue-600 text-white":o.url?"bg-white text-gray-700 hover:bg-gray-50 border":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:o.label}},e)}export{nt as default};
