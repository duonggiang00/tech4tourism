import{c as de,b as he,u as xe,r as G,j as s,L as te,a as Y,H as pe}from"./app-jK4qC5mS.js";import{A as ue,a as fe,b as je}from"./alert-DI_7dO1h.js";import{B as c}from"./button-CbjqQSYC.js";import{I as ve}from"./input-DWK0bqH_.js";import{b as Z,e as n,a as ge,c as k,T as we,d as Ne}from"./table-vcSeCQFs.js";import{A as be}from"./app-layout-CRug86Ft.js";import{s as A}from"./index-2FGh3n-F.js";import{t as ie}from"./index-DP83cKko.js";import{ServiceAttributeFormDialog as ye}from"./dialog-DOgahvI4.js";import{C as Se}from"./circle-check-BqPQtH70.js";import{E as ae}from"./eye-BKvQaNEo.js";import{P as ee}from"./pencil-BxEn5tA-.js";import{T as le}from"./trash-2-CnNKrcSB.js";import{S as re}from"./search-vg3Tm0t9.js";import"./app-B32Q6Rc9.js";import"./utils-D0Zg16Wk.js";import"./index-DrepN1D_.js";import"./index-BY1UvJ8l.js";import"./x-CqTXyibP.js";import"./createLucideIcon-Dv7VkWmT.js";import"./index-CD0XU3oY.js";import"./avatar-ApwrDypj.js";import"./index-Dhq0cQs_.js";import"./index-CMWG4mbA.js";import"./index-D9s5CDJa.js";import"./index-7ujUmCNw.js";import"./app-logo-icon-BgMMptVa.js";import"./index-31lGrPGR.js";import"./index-gSLmiL6w.js";import"./index-DaohGxKX.js";import"./index-CGelz8kl.js";import"./users-BMKuDtIB.js";import"./file-text-B4sExV2-.js";import"./badge-CgsJR6-J.js";import"./dialog-vZSf95IW.js";import"./textarea-DfVMUKSG.js";const Te=[{title:"Thuộc tính dịch vụ",href:A.index().url}];function ds(){const e=de.c(69),{attributes:r,flash:_,services:M,service_names:V,filters:se}=he().props,{delete:q}=xe(),[a,ce]=G.useState(se.search||""),[i,ne]=G.useState(se.service_name||"all"),[J,z]=G.useState(!1),[D,Q]=G.useState(void 0);let E;e[0]!==a||e[1]!==i?(E=t=>{t.preventDefault(),Y.get(A.index().url,{search:a,service_name:i==="all"?"":i},{preserveState:!0,replace:!0,preserveScroll:!0})},e[0]=a,e[1]=i,e[2]=E):E=e[2];const m=E;let H;e[3]!==a?(H=t=>{const l=t.target.value;ne(l),Y.get(A.index().url,{search:a,service_name:l==="all"?"":l},{preserveState:!0,replace:!0,preserveScroll:!0})},e[3]=a,e[4]=H):H=e[4];const U=H;let I;e[5]!==q?(I=(t,l)=>{confirm(`Bạn có chắc muốn xóa thuộc tính "${l}"?`)&&q(A.destroy(t).url,{onSuccess:Ae,onError:ke})},e[5]=q,e[6]=I):I=e[6];const o=I;let L;e[7]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{Q(void 0),z(!0)},e[7]=L):L=e[7];const me=L;let $;e[8]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(pe,{title:"Thuộc tính dịch vụ"}),e[8]=$):$=e[8];let d;e[9]!==_.message?(d=_.message&&s.jsx("div",{className:"m-4",children:s.jsxs(ue,{className:"border-green-200 bg-green-50",children:[s.jsx(Se,{className:"h-4 w-4 text-green-600"}),s.jsx(fe,{className:"text-green-800",children:"Thông báo!"}),s.jsx(je,{className:"text-green-700",children:_.message})]})}),e[9]=_.message,e[10]=d):d=e[10];let B;e[11]===Symbol.for("react.memo_cache_sentinel")?(B=t=>ce(t.target.value),e[11]=B):B=e[11];let h;e[12]!==a?(h=s.jsx(ve,{value:a,onChange:B,placeholder:"Tìm theo tên, giá trị, loại hoặc dịch vụ...",className:"w-full flex-1"}),e[12]=a,e[13]=h):h=e[13];let K;e[14]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(c,{type:"submit",variant:"secondary",className:"max-md:hidden",children:s.jsx(re,{className:"h-4 w-4"})}),e[14]=K):K=e[14];let x;e[15]!==m||e[16]!==h?(x=s.jsxs("form",{onSubmit:m,className:"flex w-full items-center gap-2 md:flex-1",children:[h,K]}),e[15]=m,e[16]=h,e[17]=x):x=e[17];let O;e[18]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("option",{value:"all",children:"Tất cả dịch vụ"}),e[18]=O):O=e[18];let p;e[19]!==V?(p=V.map(Ce),e[19]=V,e[20]=p):p=e[20];let u;e[21]!==U||e[22]!==i||e[23]!==p?(u=s.jsxs("select",{value:i,onChange:U,className:"w-full rounded-md border border-gray-300 px-3 py-2 md:w-auto",children:[O,p]}),e[21]=U,e[22]=i,e[23]=p,e[24]=u):u=e[24];let P;e[25]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(re,{className:"mr-2 h-4 w-4"}),e[25]=P):P=e[25];let f;e[26]!==m?(f=s.jsxs(c,{onClick:m,className:"w-full md:hidden",children:[P," Tìm kiếm"]}),e[26]=m,e[27]=f):f=e[27];let j;e[28]!==u||e[29]!==f||e[30]!==x?(j=s.jsxs("div",{className:"flex flex-col gap-3 md:w-2/3 md:flex-row md:items-center",children:[x,u,f]}),e[28]=u,e[29]=f,e[30]=x,e[31]=j):j=e[31];let R;e[32]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs(c,{onClick:me,className:"w-full md:w-auto",children:[s.jsx(ee,{className:"mr-2 h-4 w-4"})," Thêm Thuộc tính"]}),e[32]=R):R=e[32];let v;e[33]!==j?(v=s.jsxs("div",{className:"m-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[j,R]}),e[33]=j,e[34]=v):v=e[34];let g;e[35]!==r.data||e[36]!==o?(g=r.data.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Không có thuộc tính nào."}):r.data.map(t=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border shadow-sm space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Service: ",t.service?.name||"—"]})]}),s.jsx("div",{className:"shrink-0 bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded",children:t.type||"—"})]}),s.jsxs("div",{className:"border-t pt-2 mt-2",children:[s.jsx("span",{className:"text-gray-500 text-sm block mb-1",children:"Giá trị:"}),s.jsx("div",{className:"font-mono text-sm bg-white p-2 rounded border break-all",children:t.value||"—"})]}),s.jsxs("div",{className:"pt-2 flex justify-end gap-2 border-t mt-2",children:[s.jsx(te,{href:A.show(t.id).url,className:"flex-1",children:s.jsxs(c,{variant:"outline",size:"sm",className:"w-full",children:[s.jsx(ae,{className:"h-4 w-4 mr-2"})," Chi tiết"]})}),s.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{Q(t),z(!0)},className:"flex-1",children:[s.jsx(ee,{className:"h-4 w-4 mr-2"})," Sửa"]}),s.jsx(c,{variant:"destructive",size:"sm",onClick:()=>o(t.id,t.name),className:"px-3",children:s.jsx(le,{className:"h-4 w-4"})})]})]},t.id)),e[35]=r.data,e[36]=o,e[37]=g):g=e[37];let w;e[38]!==g?(w=s.jsx("div",{className:"grid grid-cols-1 gap-4 p-4 md:hidden",children:g}),e[38]=g,e[39]=w):w=e[39];let X;e[40]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(ge,{children:s.jsxs(Z,{children:[s.jsx(k,{className:"w-[50px] text-center whitespace-nowrap",children:"#"}),s.jsx(k,{className:"whitespace-nowrap",children:"Tên thuộc tính"}),s.jsx(k,{className:"whitespace-nowrap",children:"Dịch vụ"}),s.jsx(k,{className:"whitespace-nowrap",children:"Giá trị"}),s.jsx(k,{className:"whitespace-nowrap",children:"Loại"}),s.jsx(k,{className:"text-center whitespace-nowrap",children:"Hành động"})]})}),e[40]=X):X=e[40];let N;e[41]!==r.data||e[42]!==o?(N=r.data.length===0?s.jsx(Z,{children:s.jsx(n,{colSpan:6,className:"py-8 text-center text-gray-500",children:"Không có thuộc tính nào."})}):r.data.map((t,l)=>s.jsxs(Z,{children:[s.jsx(n,{className:"text-center whitespace-nowrap",children:l+1}),s.jsx(n,{className:"whitespace-nowrap font-medium",children:t.name}),s.jsx(n,{className:"whitespace-nowrap",children:t.service?.name||"—"}),s.jsx(n,{className:"whitespace-nowrap max-w-xs truncate",title:t.value,children:t.value||"—"}),s.jsx(n,{className:"whitespace-nowrap",children:t.type||"—"}),s.jsx(n,{className:"whitespace-nowrap",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx(te,{href:A.show(t.id).url,children:s.jsx(c,{variant:"ghost",size:"sm",title:"Xem chi tiết",children:s.jsx(ae,{className:"h-4 w-4"})})}),s.jsx(c,{variant:"ghost",size:"sm",title:"Chỉnh sửa",onClick:()=>{Q(t),z(!0)},children:s.jsx(ee,{className:"h-4 w-4"})}),s.jsx(c,{variant:"ghost",size:"sm",title:"Xóa",className:"text-red-500 hover:text-red-700",onClick:()=>o(t.id,t.name),children:s.jsx(le,{className:"h-4 w-4"})})]})})]},t.id)),e[41]=r.data,e[42]=o,e[43]=N):N=e[43];let b;e[44]!==N?(b=s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(we,{className:"min-w-full",children:[X,s.jsx(Ne,{children:N})]})}),e[44]=N,e[45]=b):b=e[45];let y;if(e[46]!==r.links||e[47]!==a||e[48]!==i){let t;e[50]!==a||e[51]!==i?(t=(l,oe)=>s.jsx("button",{disabled:!l.url,onClick:()=>{l.url&&Y.get(l.url,{search:a,service_name:i==="all"?"":i},{preserveScroll:!0,preserveState:!0,replace:!0})},className:`rounded-md border px-3 py-1 text-sm ${l.active?"border-blue-600 bg-blue-600 text-white":"border-gray-200 bg-white text-gray-700 hover:bg-gray-100"} ${l.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:l.label}},oe),e[50]=a,e[51]=i,e[52]=t):t=e[52],y=r.links.map(t),e[46]=r.links,e[47]=a,e[48]=i,e[49]=y}else y=e[49];let S;e[53]!==y?(S=s.jsx("div",{className:"flex flex-wrap justify-center gap-2 p-4",children:y}),e[53]=y,e[54]=S):S=e[54];let T;e[55]!==w||e[56]!==b||e[57]!==S?(T=s.jsxs("div",{className:"m-8 rounded-lg border bg-white shadow-sm",children:[w,b,S]}),e[55]=w,e[56]=b,e[57]=S,e[58]=T):T=e[58];const W=D?`Chỉnh sửa: ${D.name}`:"Thêm Thuộc Tính Dịch Vụ";let C;e[59]!==D||e[60]!==J||e[61]!==M||e[62]!==W?(C=s.jsx(ye,{open:J,onOpenChange:z,initialData:D,services:M,title:W}),e[59]=D,e[60]=J,e[61]=M,e[62]=W,e[63]=C):C=e[63];let F;return e[64]!==v||e[65]!==T||e[66]!==C||e[67]!==d?(F=s.jsxs(be,{breadcrumbs:Te,children:[$,d,v,T,C]}),e[64]=v,e[65]=T,e[66]=C,e[67]=d,e[68]=F):F=e[68],F}function Ce(e,r){return s.jsx("option",{value:e,children:e},r)}function ke(){return ie.error("Không thể xóa.")}function Ae(){return ie.success("Xóa thành công!")}export{ds as default};
